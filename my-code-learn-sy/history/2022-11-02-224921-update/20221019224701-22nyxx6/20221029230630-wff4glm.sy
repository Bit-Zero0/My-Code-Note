{
	"ID": "20221029230630-wff4glm",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20221029230630-wff4glm",
		"title": "TCP协议",
		"updated": "20221102224920"
	},
	"Children": [
		{
			"ID": "20221029230640-9ijdknu",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221029230640-9ijdknu",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP基本认识"
				}
			]
		},
		{
			"ID": "20221029230640-h6yjo5v",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221029230640-h6yjo5v",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "什么是 TCP ？"
				}
			]
		},
		{
			"ID": "20221029230640-q1tbr9b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-q1tbr9b",
				"updated": "20221029231045"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "面向连接的、可靠的、基于字节流"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "的传输层通信协议。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221029170648"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221029170648-20221029231045-elzzb3i.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221029230640-gyh61ai",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221029230640-gyh61ai",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"ID": "20221029230640-nbhl6ub",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-nbhl6ub",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-trl70py",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-trl70py",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "面向连接"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：一定是「一对一」才能连接，不能像 UDP 协议可以一个主机同时向多个主机发送消息，也就是一对多是无法做到的；"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-v82no3n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-v82no3n",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-cf577zh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-cf577zh",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "可靠的"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：无论的网络链路中出现了怎样的链路变化，TCP 都可以保证一个报文一定能够到达接收端；"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-no366uk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-no366uk",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-xjl1ytt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-xjl1ytt",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "字节流"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：用户消息通过 TCP 协议传输时，消息可能会被操作系统「分组」成多个的 TCP 报文，如果接收方的程序如果不知道「消息的边界」，是无法读出一个有效的用户消息的。并且 TCP 报文是「有序的」，当「前一个」TCP 报文没有收到的时候，即使它先收到了后面的 TCP 报文，那么也不能扔给应用层去处理，同时对「重复」的 TCP 报文会自动丢弃。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221029231105-1tgly8d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231105-1tgly8d"
			}
		},
		{
			"ID": "20221029230640-lmpztjl",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221029230640-lmpztjl",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 头格式有哪些？"
				}
			]
		},
		{
			"ID": "20221029230640-buk8gf4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-buk8gf4",
				"updated": "20221029231059"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "标注颜色的表示与本文关联比较大的字段\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221029170109"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221029170109-20221029231059-8u9cniq.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221029230640-wlzf1o1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-wlzf1o1",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "序列号"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：在建立连接时由计算机生成的随机数作为其初始值，通过 SYN 包传给接收端主机，每发送一次数据，就「累加」一次该「数据字节数」的大小。"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "用来解决网络包乱序问题。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221029231110-3n0gpoi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231110-3n0gpoi"
			}
		},
		{
			"ID": "20221029230640-bf70nd7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-bf70nd7",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "确认应答号"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：指下一次「期望」收到的数据的序列号，发送端收到这个确认应答以后可以认为在这个序号以前的数据都已经被正常接收。"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "用来解决丢包的问题。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221029231113-jwqnuvt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231113-jwqnuvt"
			}
		},
		{
			"ID": "20221029230640-x5id5g1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-x5id5g1",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "控制位："
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221029230640-4d1k7o8",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221029230640-4d1k7o8",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"ID": "20221029230640-pkq7sdk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-pkq7sdk",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-ukxana7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-ukxana7",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "_URG_: 紧急指针是否有效"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-bowzx5h",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-bowzx5h",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-q2761us",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-q2761us",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "_ACK_：该位为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，「确认应答」的字段变为有效，TCP 规定除了最初建立连接时的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 包之外该位必须设置为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 。"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-p7i3lyy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-p7i3lyy",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-xrp0iw3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-xrp0iw3",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "_PSH_: 提示接收端应用程序立刻从TCP缓冲区把数据读走"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-5sz5nlk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-5sz5nlk",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-9lx2u3c",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-9lx2u3c",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "_RST_：该位为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，表示 TCP 连接中出现异常必须强制断开连接。"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-a86n7dv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-a86n7dv",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-e8ls0f1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-e8ls0f1",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "_SYN_：该位为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，表示希望建立连接，并在其「序列号」的字段进行序列号初始值的设定。"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-izk9phw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-izk9phw",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-i80qtkl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-i80qtkl",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "_FIN_：该位为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，表示今后不会再有数据发送，希望断开连接。当通信结束希望断开连接时，通信双方的主机之间就可以相互交换 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 位为 1 的 TCP 段。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221029230640-xys0knv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-xys0knv",
				"updated": "20221029230640"
			}
		},
		{
			"ID": "20221029231121-ifepdy2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231121-ifepdy2"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "窗口大小(16位)"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：用来做流量控制"
				}
			]
		},
		{
			"ID": "20221029231122-z0soag7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231122-z0soag7"
			}
		},
		{
			"ID": "20221029230640-bqi6gkd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-bqi6gkd",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "校验和(16位)"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": ": 发送端填充, CRC校验. 接收端校验不通过, 则认为数据有问题. 此处的检验和不光包含TCP首部, 也\n包含TCP数据部分."
				}
			]
		},
		{
			"ID": "20221029231131-fagd0o4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231131-fagd0o4"
			}
		},
		{
			"ID": "20221029231124-l73f53f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231124-l73f53f"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "紧急指针(16位)"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": ": 标识哪部分数据是紧急数据;"
				}
			]
		},
		{
			"ID": "20221029231137-w3ooh36",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231137-w3ooh36"
			}
		},
		{
			"ID": "20221029230640-i7isal6",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221029230640-i7isal6",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么需要 TCP 协议？ TCP 工作在哪一层？"
				}
			]
		},
		{
			"ID": "20221029230640-107tsuv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-107tsuv",
				"updated": "20221029231154"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "IP"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 层是「不可靠」的，它不保证网络包的交付、不保证网络包的按序交付、也不保证网络包中的数据的完整性。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221029170528"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221029170528-20221029231154-txhod9m.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n如果需要保障网络数据包的可靠性，那么就需要由上层（传输层）的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TCP"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 协议来负责。"
				}
			]
		},
		{
			"ID": "20221029230640-ypnukwy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-ypnukwy",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因为 TCP 是一个工作在"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "传输层"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "可靠"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "数据传输的服务，它能确保接收端接收的网络包是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "无损坏、无间隔、非冗余和按序的。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221029230640-mnxpfa6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-mnxpfa6",
				"updated": "20221029231219"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意："
				},
				{
					"Type": "NodeBlockRef",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeBlockRefID",
							"Data": "20221029230645-al5o9lg"
						},
						{
							"Type": "NodeBlockRefSpace"
						},
						{
							"Type": "NodeBlockRefDynamicText",
							"Data": "UDP协议"
						},
						{
							"Type": "NodeCloseParen"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 也在传输层"
				}
			]
		},
		{
			"ID": "20221029231220-st4psn8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231220-st4psn8"
			}
		},
		{
			"ID": "20221029230640-a5y4ehu",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221029230640-a5y4ehu",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "什么是TCP连接"
				}
			]
		},
		{
			"ID": "20221029230640-cc7pmb6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029230640-cc7pmb6",
				"updated": "20221029231234"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221029170949"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221029170949-20221029231234-4a97ez6.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n所以我们可以知道，建立一个 TCP 连接是需要客户端与服务端端达成上述三个信息的共识。"
				}
			]
		},
		{
			"ID": "20221029231234-7bga3u8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221029231234-7bga3u8",
				"updated": "20221029231234"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "简单来说就是，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "用于保证可靠性和流量控制维护的某些状态信息，这些信息的组合，包括Socket、序列号和窗口大小称为连接。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221029230640-3zspm8f",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221029230640-3zspm8f",
				"updated": "20221029230640"
			},
			"Children": [
				{
					"ID": "20221029230640-zwhgnh7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-zwhgnh7",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-spg89oq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-spg89oq",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "Socket"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：由 IP 地址和端口号组成"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-ylczp7g",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-ylczp7g",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-vwfofu0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-vwfofu0",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "序列号"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：用来解决乱序问题等"
								}
							]
						}
					]
				},
				{
					"ID": "20221029230640-6a09klv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221029230640-6a09klv",
						"updated": "20221029230640"
					},
					"Children": [
						{
							"ID": "20221029230640-7dncw5g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221029230640-7dncw5g",
								"updated": "20221029230640"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "窗口大小"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：用来做流量控制"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205457-7qndb1h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205457-7qndb1h"
			}
		},
		{
			"ID": "20221030205458-gfdlw5y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-gfdlw5y"
			}
		},
		{
			"ID": "20221030205458-zsyqf8c",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221030205458-zsyqf8c",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP连接建立"
				}
			]
		},
		{
			"ID": "20221030205458-nyyy7gl",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221030205458-nyyy7gl",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 三次握手过程是怎样的？"
				}
			]
		},
		{
			"ID": "20221030205458-6709wo3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-6709wo3",
				"updated": "20221030205633"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 是面向连接的协议，所以使用 TCP 前必须先建立连接，而"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "建立连接是通过三次握手来进行的"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。三次握手的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030131453"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030131453-20221030205633-svwes6f.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221030205458-gcnqbsq",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-gcnqbsq",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-vzqe4cu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-vzqe4cu",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-j8upx3q",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-j8upx3q",
								"updated": "20221030205644"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "一开始，客户端和服务端都处于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "CLOSE"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。先是服务端主动监听某个端口，处于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "LISTEN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态\n​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "Pasted image 20221030131525"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/Pasted image 20221030131525-20221030205644-cnskytn.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeBr",
									"Data": "br"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-0tkbnxj",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-0tkbnxj",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-3oa6uom",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-3oa6uom",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端会随机初始化序号（"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "client_isn"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "），将此序号置于 TCP 首部的「序号」字段中，同时把 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 标志位置为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " ，表示 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文。接着把第一个 SYN 报文发送给服务端，表示向服务端发起连接，该报文不包含应用层数据，之后客户端处于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN-SENT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205701-uwn3yt3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205701-uwn3yt3",
				"updated": "20221030205701"
			}
		},
		{
			"ID": "20221030205458-e210ypp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-e210ypp",
				"updated": "20221030205655"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030131635"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030131635-20221030205655-nymimef.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-m2ye75d",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-m2ye75d",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-jsj60n2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-jsj60n2",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-a7d0xxk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-a7d0xxk",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到客户端的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文后，首先服务端也随机初始化自己的序号（"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "server_isn"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "），将此序号填入 TCP 首部的「序号」字段中，其次把 TCP 首部的「确认应答号」字段填入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "client_isn + 1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": ", 接着把 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 和 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 标志位置为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。最后把该报文发给客户端，该报文也不包含应用层数据，之后服务端处于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN-RCVD"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205706-bso7eni",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205706-bso7eni",
				"updated": "20221030205707"
			}
		},
		{
			"ID": "20221030205458-p6p999p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-p6p999p",
				"updated": "20221030205717"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030131828"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030131828-20221030205717-b8tq9v0.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-0b2nsm8",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-0b2nsm8",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-jd1w9fd",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-jd1w9fd",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-gak24i5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-gak24i5",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到服务端报文后，还要向服务端回应最后一个应答报文，首先该应答报文 TCP 首部 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 标志位置为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " ，其次「确认应答号」字段填入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "server_isn + 1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " ，最后把报文发送给服务端，这次报文可以携带客户到服务端的数据，之后客户端处于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ESTABLISHED"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-561mdah",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-561mdah",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-034g6ke",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-034g6ke",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到客户端的应答报文后，也进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ESTABLISHED"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-7b1luoz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-7b1luoz",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从上面的过程可以发现"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "第三次握手是可以携带数据的，前两次握手是不可以携带数据的"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，这也是面试常问的题。"
				}
			]
		},
		{
			"ID": "20221030205458-cq2t7io",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-cq2t7io",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一旦完成三次握手，双方都处于 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ESTABLISHED"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态，此时连接就已建立完成，客户端和服务端就可以相互发送数据了。"
				}
			]
		},
		{
			"ID": "20221030205736-y245zzq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205736-y245zzq"
			}
		},
		{
			"ID": "20221030205458-91utfml",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221030205458-91utfml",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么是三次握手？不是两次、四次？"
				}
			]
		},
		{
			"ID": "20221030205458-k52navp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-k52navp",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "相信大家比较常回答的是：“因为三次握手才能保证双方具有接收和发送的能力。”"
				}
			]
		},
		{
			"ID": "20221030205458-y9m0yvp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-y9m0yvp",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这回答是没问题，但这回答是片面的，并没有说出主要的原因。"
				}
			]
		},
		{
			"ID": "20221030205458-cqtt4jg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-cqtt4jg",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在前面我们知道了什么是 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "TCP 连接"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "："
				}
			]
		},
		{
			"ID": "20221030205458-lxawmg8",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-lxawmg8",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-mhrfd3p",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-mhrfd3p",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-f1j1kma",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-f1j1kma",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "用于保证可靠性和流量控制维护的某些状态信息，这些信息的组合，包括"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "Socket、序列号和窗口大小"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "称为连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-h8ezabj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-h8ezabj",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，重要的是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "为什么三次握手才可以初始化Socket、序列号和窗口大小并建立 TCP 连接。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-oafk1kc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-oafk1kc",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接下来，以三个方面分析三次握手的原因："
				}
			]
		},
		{
			"ID": "20221030205458-c7cx8rr",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-c7cx8rr",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-vfeqx7y",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-vfeqx7y",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-b4mx75s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-b4mx75s",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "三次握手才可以阻止重复历史连接的初始化（主要原因）"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-vka97vf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-vka97vf",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-xomvqme",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-xomvqme",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "三次握手才可以同步双方的初始序列号"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-xmin7dx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-xmin7dx",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-zew6yu1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-zew6yu1",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "三次握手才可以避免资源浪费"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-pzfpowx",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221030205458-pzfpowx",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "原因一：避免历史连接"
				}
			]
		},
		{
			"ID": "20221030205458-z5hs0ep",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-z5hs0ep",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们来看看 RFC 793 指出的 TCP 连接使用三次握手的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "首要原因"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：\n简单来说，三次握手的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "首要原因是为了防止旧的重复连接初始化造成混乱。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-enr2juv",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221030205458-enr2juv",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221030205458-z17ztpc",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221030205458-z17ztpc",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "我们考虑一个场景，客户端先发送了 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "（seq = 90） 报文，然后客户端宕机了，而且这个 SYN 报文还被网络阻塞了，服务端并没有收到，接着客户端重启后，又重新向服务端建立连接，发送了 SYN（seq = 100） 报文（"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "注意！不是重传 SYN，重传的 SYN 的序列号是一样的"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "）。"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-5rrru5o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-5rrru5o",
				"updated": "20221030205809"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "看看三次握手是如何阻止历史连接的：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030135813"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030135813-20221030205809-n1it1ta.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221030205458-bty1qi0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-bty1qi0",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "客户端连续发送多次 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " （都是同一个四元组）建立连接的报文，在"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "网络拥堵"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "情况下："
				}
			]
		},
		{
			"ID": "20221030205458-492o3c5",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-492o3c5",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-xelja94",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-xelja94",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-o1p15gr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-o1p15gr",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "一个「旧 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文」比「最新的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 」 报文早到达了服务端，那么此时服务端就会回一个 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN + ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文给客户端，此报文中的确认号是 91（90+1）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-ou1gcpv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-ou1gcpv",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-21g2mi7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-21g2mi7",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到后，发现自己期望收到的确认号应该是 100+1，而不是 90 + 1，于是就会回 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RST"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-iln1cbh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-iln1cbh",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-4el6v86",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-4el6v86",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RST"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文后，就会释放连接。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-0g68cn2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-0g68cn2",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-ajrt9cl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-ajrt9cl",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "后续最新的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 抵达了服务端后，客户端与服务端就可以正常的完成三次握手了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-nbjnq4f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-nbjnq4f",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "上述中的「旧 SYN 报文」称为历史连接，TCP 使用三次握手建立连接的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "最主要原因就是防止「历史连接」初始化了连接"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205816-nbj0tof",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205816-nbj0tof"
			}
		},
		{
			"ID": "20221030205458-tej7xen",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-tej7xen",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeMark",
					"Data": "mark",
					"Children": [
						{
							"Type": "NodeMark2OpenMarker"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "如果是两次握手连接，就无法阻止历史连接"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "，那为什么 TCP 两次握手为什么无法阻止历史连接呢？"
						},
						{
							"Type": "NodeMark2CloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n我先直接说结论，主要是因为"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "在两次握手的情况下，服务端没有中间状态给客户端来阻止历史连接，导致服务端可能建立一个历史连接，造成资源浪费"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-7st1j77",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221030205458-7st1j77",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221030205458-di6t14i",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221030205458-di6t14i",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "你想想，在两次握手的情况下，服务端在收到 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 报文后，就进入 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "ESTABLISHED"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 状态，意味着这时可以给对方发送数据，但是客户端此时还没有进入 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "ESTABLISHED"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 状态，假设这次是历史连接，客户端判断到此次连接为历史连接，那么就会回 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "RST"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 报文来断开连接，而服务端在第一次握手的时候就进入 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "ESTABLISHED"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 状态，所以它可以发送数据的，但是它并不知道这个是历史连接，它只有在收到 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "RST"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 报文后，才会断开连接。"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-glhp5b7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-glhp5b7",
				"updated": "20221030205824"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030141009"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030141009-20221030205824-ensh0t0.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n可以看到，如果采用两次握手建立 TCP 连接的场景下，服务端在向客户端发送数据前，并没有阻止掉历史连接，导致服务端建立了一个历史连接，又白白发送了数据，妥妥地浪费了服务端的资源。"
				}
			]
		},
		{
			"ID": "20221030205836-vsinqxh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205836-vsinqxh"
			}
		},
		{
			"ID": "20221030205458-h5obeya",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-h5obeya",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因此，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "要解决这种现象，最好就是在服务端发送数据前，也就是建立连接之前，要阻止掉历史连接，这样就不会造成资源浪费，而要实现这个功能，就需要三次握手"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-acutgfm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-acutgfm",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "TCP 使用三次握手建立连接的最主要原因是防止「历史连接」初始化了连接。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205831-84ewopj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205831-84ewopj"
			}
		},
		{
			"ID": "20221030205458-vipw67q",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221030205458-vipw67q",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "原因二：同步双方初始序列号"
				}
			]
		},
		{
			"ID": "20221030205458-tqgk4ez",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-tqgk4ez",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 协议的通信双方， 都必须维护一个「"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "序列号"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "」， 序列号是可靠传输的一个关键因素，它的作用："
				}
			]
		},
		{
			"ID": "20221030205458-dfgae94",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-dfgae94",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-ay7lirl",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-ay7lirl",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-5gkvtdn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-5gkvtdn",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "接收方可以去除重复的数据；"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-snm8oge",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-snm8oge",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-xj96h23",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-xj96h23",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "接收方可以根据数据包的序列号按序接收；"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-e15qamg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-e15qamg",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-8s1acc2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-8s1acc2",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "可以标识发送出去的数据包中， 哪些是已经被对方收到的（通过 ACK 报文中的序列号知道）；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-th2rbiu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-th2rbiu",
				"updated": "20221030205843"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可见，序列号在 TCP 连接中占据着非常重要的作用，所以当客户端发送携带「初始序列号」的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文的时候，需要服务端回一个 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 应答报文，表示客户端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文已被服务端成功接收，那当服务端发送「初始序列号」给客户端的时候，依然也要得到客户端的应答回应，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "这样一来一回，才能确保双方的初始序列号能被可靠的同步。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-debg0rx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-debg0rx",
				"updated": "20221030205850"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030141303"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030141303-20221030205850-tz832mh.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n四次握手其实也能够可靠的同步双方的初始化序号，但由于"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "第二步和第三步可以优化成一步"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，所以就成了「三次握手」。"
				}
			]
		},
		{
			"ID": "20221030205458-legzknb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-legzknb",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "而两次握手只保证了一方的初始序列号能被对方成功接收，没办法保证双方的初始序列号都能被确认接收。"
				}
			]
		},
		{
			"ID": "20221030205856-nprwikx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205856-nprwikx"
			}
		},
		{
			"ID": "20221030205458-wtcj43x",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221030205458-wtcj43x",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "原因三：避免资源浪费"
				}
			]
		},
		{
			"ID": "20221030205458-w3q9qbs",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-w3q9qbs",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果只有「两次握手」，当客户端发送的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文在网络中阻塞，客户端没有接收到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，就会重新发送 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " ，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "由于没有第三次握手，服务端不清楚客户端是否收到了自己回复的 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "ACK"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 报文，所以服务端每收到一个 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 就只能先主动建立一个连接"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，这会造成什么情况呢？"
				}
			]
		},
		{
			"ID": "20221030205458-gntk3jc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-gntk3jc",
				"updated": "20221030205918"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030141823"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030141823-20221030205918-6158ktp.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n即两次握手会造成消息滞留情况下，服务端重复接受无用的连接请求 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，而造成重复分配资源。"
				}
			]
		},
		{
			"ID": "20221030205918-96suw6t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205918-96suw6t",
				"updated": "20221030205918"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果客户端发送的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文在网络中阻塞了，重复发送多次 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，那么服务端在收到请求后就会"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "建立多个冗余的无效链接，造成不必要的资源浪费。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-pbjmp6k",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221030205458-pbjmp6k",
				"updated": "20221030210011"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221030205458-zfmt9x6",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221030205458-zfmt9x6",
						"updated": "20221030210011"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "Tip\n很多人问，两次握手不是也可以根据上下文信息丢弃 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 历史报文吗？\n我这里两次握手是假设「由于没有第三次握手，服务端不清楚客户端是否收到了自己发送的建立连接的 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "ACK"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 确认报文，所以每收到一个 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 就只能先主动建立一个连接」这个场景。\n当然你要实现成类似三次握手那样，根据上下文丢弃 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 历史报文也是可以的，两次握手没有具体的实现，怎么假设都行。"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-r50opum",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221030205458-r50opum",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "小结"
				}
			]
		},
		{
			"ID": "20221030205458-bse3eqf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-bse3eqf",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 建立连接时，通过三次握手"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "能防止历史连接的建立，能减少双方不必要的资源开销，能帮助双方同步初始化序列号"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。序列号能够保证数据包不重复、不丢弃和按序传输。"
				}
			]
		},
		{
			"ID": "20221030205458-hdc8ppd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-hdc8ppd",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "不使用「两次握手」和「四次握手」的原因："
				}
			]
		},
		{
			"ID": "20221030205458-sk8qdml",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-sk8qdml",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-i6itiuv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-i6itiuv",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-14itpxd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-14itpxd",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "「两次握手」：无法防止历史连接的建立，会造成双方资源的浪费，也无法可靠的同步双方序列号；"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-wddcttv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-wddcttv",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-uqojef6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-uqojef6",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "「四次握手」：三次握手就已经理论上最少可靠连接建立，所以不需要使用更多的通信次数。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-t83nz70",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221030205458-t83nz70",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第一次握手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221030205458-4nr7cni",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-4nr7cni",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当客户端想和服务端建立 TCP 连接的时候，首先第一个发的就是 SYN 报文，然后进入到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN_SENT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221030205458-4f561tq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-4f561tq",
				"updated": "20221030210206"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在这之后，如果客户端迟迟收不到服务端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文（第二次握手），就会触发「"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "超时重传"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "」机制，重传 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN "
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "报文，而且"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "重传的 SYN 报文的序列号都是一样的"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-disdwkp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-disdwkp",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "不同版本的操作系统可能超时时间不同，有的 1 秒的，也有 3 秒的，这个超时时间是写死在内核里的，如果想要更改则需要重新编译内核，比较麻烦。"
				}
			]
		},
		{
			"ID": "20221030205458-l6lsohl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-l6lsohl",
				"updated": "20221030210220"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当客户端在 1 秒后没收到服务端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文后，客户端就会重发 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，那到底重发几次呢？"
				}
			]
		},
		{
			"ID": "20221030205458-v3pmrnp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-v3pmrnp",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 Linux 里，客户端的 SYN 报文"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "最大重传次数"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "由 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_syn_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "内核参数控制，这个参数是可以自定义的，默认值一般是 5。"
				}
			]
		},
		{
			"ID": "20221030205458-tclsp0z",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221030205458-tclsp0z",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# cat /proc/sys/net/ipv4/tcp_syn_retries\n5\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221030210318-oaklzs9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210318-oaklzs9"
			}
		},
		{
			"ID": "20221030205458-wpv275j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-wpv275j",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通常，第一次超时重传是在 1 秒后，第二次超时重传是在 2 秒，第三次超时重传是在 4 秒后，第四次超时重传是在 8 秒后，第五次是在超时重传 16 秒后。没错，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "每次超时的时间是上一次的 2 倍"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-ow39xyy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-ow39xyy",
				"updated": "20221030210326"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当第五次超时重传后，会继续等待 32 秒，如果服务端仍然没有回应 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，客户端就不再发送 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 包，然后断开 TCP 连接。"
				}
			]
		},
		{
			"ID": "20221030205458-9z27vhy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-9z27vhy",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，总耗时是 1+2+4+8+16+32=63 秒，大约 1 分钟左右。"
				}
			]
		},
		{
			"ID": "20221030205458-4hbqw2h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-4hbqw2h",
				"updated": "20221030210352"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": " tcp_syn_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数值为 3，那么当客户端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文一直在网络中丢失时，会发生下图的过程：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030134009"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030134009-20221030210352-cztzs63.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221030205458-5ozyslc",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221030205458-5ozyslc",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221030205458-nubz5yr",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221030205458-nubz5yr",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "具体过程：\n当客户端超时重传 3 次 SYN 报文后，由于 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "tcp_syn_retries"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 为 3，已达到最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到服务端的第二次握手（SYN-ACK 报文），那么客户端就会断开连接。"
						}
					]
				}
			]
		},
		{
			"ID": "20221030210404-75vpt18",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210404-75vpt18"
			}
		},
		{
			"ID": "20221030205458-d6fa5tx",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221030205458-d6fa5tx",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第二次握手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221030205458-aywxd5h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-aywxd5h",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当服务端收到客户端的第一次握手后，就会回 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文给客户端，这个就是第二次握手，此时服务端会进入 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN_RCVD"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221030205458-kt6yags",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-kt6yags",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第二次握手的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文其实有两个目的 ："
				}
			]
		},
		{
			"ID": "20221030205458-w09g89q",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-w09g89q",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-ym4wwza",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-ym4wwza",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-9vptxbu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-9vptxbu",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "第二次握手里的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "， 是对第一次握手的确认报文；"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-xn759s5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-xn759s5",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-mgkh8rr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-mgkh8rr",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "第二次握手里的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，是服务端发起建立 TCP 连接的报文；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030210416-cbianl4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210416-cbianl4"
			}
		},
		{
			"ID": "20221030205458-64t4rz2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-64t4rz2",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，如果第二次握手丢了，就会发生比较有意思的事情，具体会怎么样呢？"
				}
			]
		},
		{
			"ID": "20221030205458-y2849jy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-y2849jy",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因为第二次握手报文里是包含对客户端的第一次握手的"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": " ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 确认报文，所以，如果客户端迟迟没有收到第二次握手，那么客户端就觉得可能自己的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文（第一次握手）丢失了，于是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "客户端就会触发超时重传机制，重传 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 报文"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-1wmpw38",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-1wmpw38",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后，因为第二次握手中包含服务端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，所以当客户端收到后，需要给服务端发送 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 确认报文（第三次握手），服务端才会认为该 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文被客户端收到了。"
				}
			]
		},
		{
			"ID": "20221030205458-9khh4a1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-9khh4a1",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么，如果第二次握手丢失了，服务端就收不到第三次握手，于是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "服务端这边会触发超时重传机制，重传 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "SYN-ACK"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 报文"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-ozckbpm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-ozckbpm",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 Linux 下，"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文的最大重传次数由 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_synack_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "内核参数决定，默认值是 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "5"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-2p3ss11",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221030205458-2p3ss11",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# cat /proc/sys/net/ipv4/tcp_synack_retries\n5\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221030205458-uxpl7bo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-uxpl7bo",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因此，当第二次握手丢失了，客户端和服务端都会重传："
				}
			]
		},
		{
			"ID": "20221030205458-eabvsvq",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-eabvsvq",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-leka0ax",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-leka0ax",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-dlkez0k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-dlkez0k",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端会重传 SYN 报文，也就是第一次握手，最大重传次数由 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_syn_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "内核参数决定；"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-l9c791n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-l9c791n",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-1eqf7jb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-1eqf7jb",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端会重传 SYN-ACK 报文，也就是第二次握手，最大重传次数由 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_synack_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 内核参数决定。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030210441-h1hum5j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210441-h1hum5j"
			}
		},
		{
			"ID": "20221030205458-f9dwhqp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-f9dwhqp",
				"updated": "20221030210454"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_syn_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数值为 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "1"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_synack_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数值为 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "2"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，那么当第二次握手一直丢失时，发生的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030134727"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030134727-20221030210454-9sbwx12.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n具体过程："
				}
			]
		},
		{
			"ID": "20221030205458-b3s0yae",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-b3s0yae",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-44au104",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-44au104",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-y4iynt1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-y4iynt1",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当客户端超时重传 1 次 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文后，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_syn_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 1，已达到最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到服务端的第二次握手（"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN-ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文），那么客户端就会断开连接。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-0z167h6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-0z167h6",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-aoxhknf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-aoxhknf",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当服务端超时重传 2 次 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SYN-ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文后，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_synack_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 2，已达到最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到客户端的第三次握手（"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文），那么服务端就会断开连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030210503-dii3ots",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210503-dii3ots"
			}
		},
		{
			"ID": "20221030205458-lsdf97o",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221030205458-lsdf97o",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第三次握手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221030205458-jjzi48b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-jjzi48b",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "客户端收到服务端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文后，就会给服务端回一个 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，也就是第三次握手，此时客户端状态进入到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ESTABLISH"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221030205458-qwpx4an",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-qwpx4an",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因为这个第三次握手的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 是对第二次握手的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的确认报文，所以当第三次握手丢失了，如果"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "服务端那一方迟迟收不到这个确认报文，就会触发"
						},
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeText",
									"Data": "超时重传机制"
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，重传 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SYN-ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，直到收到第三次握手，或者达到最大重传次数。"
				}
			]
		},
		{
			"ID": "20221030205458-fi22x2d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-fi22x2d",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "ACK 报文是不会有重传的，当 ACK 丢失了，就由对方重传对应的报文"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-lnolg79",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-lnolg79",
				"updated": "20221030210557"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": " tcp_synack_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数值为 2，那么当第三次握手一直丢失时，发生的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030132734"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030132734-20221030210557-z2wxbh5.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n具体过程："
				}
			]
		},
		{
			"ID": "20221030205458-34p4uk6",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-34p4uk6",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-2406b6q",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-2406b6q",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-lzsou9h",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-lzsou9h",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当服务端超时重传 2 次"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": " SYN-ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文后，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_synack_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 2，已达到最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到客户端的第三次握手（"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文），那么服务端就会断开连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-o72gyf6",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221030205458-o72gyf6",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP连接断开"
				}
			]
		},
		{
			"ID": "20221030205458-kiydzfx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-kiydzfx",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "天下没有不散的宴席，对于 TCP 连接也是这样， TCP 断开连接是通过"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "四次挥手"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "方式。"
				}
			]
		},
		{
			"ID": "20221030205458-3a3qxr3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-3a3qxr3",
				"updated": "20221030210643"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "双方都可以主动断开连接，断开连接后主机中的「资源」将被释放，四次挥手的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 382px;",
						"style": "width: 372px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030142856"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030142856-20221030210636-8vdrvey.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 372px;\" parent-style=\"max-width: 382px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n"
				}
			]
		},
		{
			"ID": "20221030210647-1zxpyum",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210647-1zxpyum"
			}
		},
		{
			"ID": "20221030210650-ny70qwy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030210650-ny70qwy",
				"updated": "20221030210653"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 382px;",
						"style": "width: 372px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221030143016"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221030142856-20221030210636-8vdrvey.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 372px;\" parent-style=\"max-width: 382px;\"}"
				}
			]
		},
		{
			"ID": "20221030205458-5bluyvm",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-5bluyvm",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-tyvds8i",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-tyvds8i",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-gdhct6m",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-gdhct6m",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端打算关闭连接，此时会发送一个 TCP 首部 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 标志位被置为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的报文，也即 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文，之后客户端进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN_WAIT_1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-ntrzp9f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-ntrzp9f",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-wgka719",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-wgka719",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到该报文后，就向客户端发送 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 应答报文，接着服务端进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "CLOSE_WAIT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-zqb27jw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-zqb27jw",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-octd6tx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-octd6tx",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到服务端的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 应答报文后，之后进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN_WAIT_2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-yocjox8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-yocjox8",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-gij2ho3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-gij2ho3",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "等待服务端处理完数据后，也向客户端发送 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文，之后服务端进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "LAST_ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-t4nioen",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-t4nioen",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-wv672wn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-wv672wn",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到服务端的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文后，回一个 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 应答报文，之后进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "TIME_WAIT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-lvgroc2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-lvgroc2",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-9c6t0rt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-9c6t0rt",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到了 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 应答报文后，就进入了 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "CLOSE"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态，至此服务端已经完成连接的关闭。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-fgzrr6s",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-fgzrr6s",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-dnq2o6p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-dnq2o6p",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端在经过 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "2MSL"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 一段时间后，自动进入 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "CLOSE"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 状态，至此客户端也完成连接的关闭。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-k3kkq4i",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-k3kkq4i",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你可以看到，每个方向都需要"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "一个 FIN 和一个 ACK"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，因此通常被称为"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "四次挥手"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221030205458-bcy674u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-bcy674u",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这里一点需要注意是："
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "主动关闭连接的，才有 TIME_WAIT 状态。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-8whts60",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221030205458-8whts60",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么挥手需要四次？"
				}
			]
		},
		{
			"ID": "20221030205458-902mga8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-902mga8",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "再来回顾下四次挥手双方发 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 包的过程，就能理解为什么需要四次了。"
				}
			]
		},
		{
			"ID": "20221030205458-oe3zj4x",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221030205458-oe3zj4x",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"ID": "20221030205458-qzsdbk1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-qzsdbk1",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-pn00ujl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-pn00ujl",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "关闭连接时，客户端向服务端发送 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，仅仅表示客户端不再发送数据了但是还能接收数据。"
								}
							]
						}
					]
				},
				{
					"ID": "20221030205458-b7ws7y2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221030205458-b7ws7y2",
						"updated": "20221030205458"
					},
					"Children": [
						{
							"ID": "20221030205458-soc561b",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221030205458-soc561b",
								"updated": "20221030205458"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到客户端的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文时，先回一个 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 应答报文，而服务端可能还有数据需要处理和发送，等服务端不再发送数据时，才发送 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "FIN"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文给客户端来表示同意现在关闭连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221030205458-x1e24zb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221030205458-x1e24zb",
				"updated": "20221030205458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从上面过程可知，服务端通常需要等待完成数据的发送和处理，所以服务端的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 和 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 一般都会分开发送，因此是需要四次挥手。"
				}
			]
		},
		{
			"ID": "20221102222418-73uo2ke",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222418-73uo2ke"
			}
		},
		{
			"ID": "20221102222415-x1e0owz",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-x1e0owz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第一次挥手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221102222415-olrtm60",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-olrtm60",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当客户端（主动关闭方）调用 close 函数后，就会向服务端发送 FIN 报文，试图与服务端断开连接，此时客户端的连接进入到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN_WAIT_1"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221102222415-rbrad8q",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-rbrad8q",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "正常情况下，如果能及时收到服务端（被动关闭方）的 ACK，则会很快变为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN_WAIT2"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "状态。"
				}
			]
		},
		{
			"ID": "20221102222415-k3n25bx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-k3n25bx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果第一次挥手丢失了，那么客户端迟迟收不到被动方的 ACK 的话，也就会触发超时重传机制，重传 FIN 报文，重发次数由 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数控制。"
				}
			]
		},
		{
			"ID": "20221102222415-b2fzvbu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-b2fzvbu",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当客户端重传 FIN 报文的次数超过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 后，就不再发送 FIN 报文，则会在等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到第二次挥手，那么直接进入到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "close"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221102222415-038liz9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-038liz9",
				"updated": "20221102222507"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数值为 3，当第一次挥手一直丢失时，发生的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102215439"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102215439-20221102222507-ojs805x.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n具体过程："
				}
			]
		},
		{
			"ID": "20221102222415-6obnjcq",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-6obnjcq",
				"updated": "20221102222513"
			},
			"Children": [
				{
					"ID": "20221102222415-4enx6c8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-4enx6c8",
						"updated": "20221102222513"
					},
					"Children": [
						{
							"ID": "20221102222415-mk6tl5l",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-mk6tl5l",
								"updated": "20221102222513"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当客户端超时重传 3 次 FIN 报文后，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_orphan_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 3，已达到最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到服务端的第二次挥手（ACK报文），那么客户端就会断开连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-lbwkqkh",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-lbwkqkh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第二次挥手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221102222415-on6keu4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-on6keu4",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当服务端收到客户端的第一次挥手后，就会先回一个 ACK 确认报文，此时服务端的连接进入到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "CLOSE_WAIT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221102222415-bvl2utz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-bvl2utz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在前面我们也提了，ACK 报文是不会重传的，所以如果服务端的第二次挥手丢失了，客户端就会触发超时重传机制，重传 FIN 报文，直到收到服务端的第二次挥手，或者达到最大的重传次数。"
				}
			]
		},
		{
			"ID": "20221102222415-wrmu264",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-wrmu264",
				"updated": "20221102222527"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数值为 2，当第二次挥手一直丢失时，发生的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102215706"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102215706-20221102222523-oz1jwiu.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n具体过程："
				}
			]
		},
		{
			"ID": "20221102222415-z6603bz",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-z6603bz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-2z4a4sp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-2z4a4sp",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-xrsy9rz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-xrsy9rz",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当客户端超时重传 2 次 FIN 报文后，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_orphan_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 2，已达到最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到服务端的第二次挥手（ACK 报文），那么客户端就会断开连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-houf1pv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-houf1pv",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这里提一下，当客户端收到第二次挥手，也就是收到服务端发送的 ACK 报文后，客户端就会处于 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN_WAIT2"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态，在这个状态需要等服务端发送第三次挥手，也就是服务端的 FIN 报文。"
				}
			]
		},
		{
			"ID": "20221102222415-3d2d688",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-3d2d688",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对于 close 函数关闭的连接，由于无法再发送和接收数据，所以"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN_WAIT2"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态不可以持续太久，而 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_fin_timeout"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 控制了这个状态下连接的持续时长，默认值是 60 秒。"
				}
			]
		},
		{
			"ID": "20221102222415-9fioli5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9fioli5",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这意味着对于调用 close 关闭的连接，如果在 60 秒后还没有收到 FIN 报文，客户端（主动关闭方）的连接就会直接关闭，如下图："
				}
			]
		},
		{
			"ID": "20221102222415-yfbabop",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-yfbabop",
				"updated": "20221102222540"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102215805"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102215805-20221102222540-ub6eazu.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n但是注意，如果主动关闭方使用 shutdown 函数关闭连接，指定了只关闭发送方向，而接收方向并没有关闭，那么意味着主动关闭方还是可以接收数据的。"
				}
			]
		},
		{
			"ID": "20221102222415-cjcgo99",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-cjcgo99",
				"updated": "20221102222546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "此时，如果主动关闭方一直没收到第三次挥手，那么主动关闭方的连接将会一直处于 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN_WAIT2"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态（"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_fin_timeout"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 无法控制 shutdown 关闭的连接）。如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 462px;",
						"style": "width: 452px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220114"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102215805-20221102222540-ub6eazu.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 452px;\" parent-style=\"max-width: 462px;\"}"
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222548-y7xlmqp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222548-y7xlmqp"
			}
		},
		{
			"ID": "20221102222415-ztfl6fx",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-ztfl6fx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第三次挥手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221102222415-2zdl6w9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-2zdl6w9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当服务端（被动关闭方）收到客户端（主动关闭方）的 FIN 报文后，内核会自动回复 ACK，同时连接处于 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "CLOSE_WAIT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态，顾名思义，它表示等待应用进程调用 close 函数关闭连接。"
				}
			]
		},
		{
			"ID": "20221102222415-436br29",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-436br29",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "此时，内核是没有权利替代进程关闭连接，必须由进程主动调用 close 函数来触发服务端发送 FIN 报文。"
				}
			]
		},
		{
			"ID": "20221102222415-bz37eij",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-bz37eij",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "服务端处于 CLOSE_WAIT 状态时，调用了 close 函数，内核就会发出 FIN 报文，同时连接进入 LAST_ACK 状态，等待客户端返回 ACK 来确认连接关闭。"
				}
			]
		},
		{
			"ID": "20221102222415-bndoig2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-bndoig2",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果迟迟收不到这个 ACK，服务端就会重发 FIN 报文，重发次数仍然由 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数控制，这与客户端重发 FIN 报文的重传次数控制方式是一样的。"
				}
			]
		},
		{
			"ID": "20221102222415-djmn6ms",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-djmn6ms",
				"updated": "20221102222602"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " = 3，当第三次挥手一直丢失时，发生的过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 452px;",
						"style": "width: 442px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220129"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102220129-20221102222602-xdqebqr.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 442px;\" parent-style=\"max-width: 452px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n具体过程："
				}
			]
		},
		{
			"ID": "20221102222415-57q272k",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-57q272k",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-coqze5w",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-coqze5w",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-e6uvdn5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-e6uvdn5",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当服务端重传第三次挥手报文的次数达到了 3 次后，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_orphan_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 3，达到了重传最大次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到客户端的第四次挥手（ACK报文），那么服务端就会断开连接。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-jtzk86o",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-jtzk86o",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-h823sie",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-h823sie",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端因为是通过 close 函数关闭连接的，处于 FIN_WAIT_2 状态是有时长限制的，如果 tcp_fin_timeout 时间内还是没能收到服务端的第三次挥手（FIN 报文），那么客户端就会断开连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-ob3y86c",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-ob3y86c",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第四次挥手丢失了，会发生什么？"
				}
			]
		},
		{
			"ID": "20221102222415-absdvf4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-absdvf4",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当客户端收到服务端的第三次挥手的 FIN 报文后，就会回 ACK 报文，也就是第四次挥手，此时客户端连接进入 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TIME_WAIT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221102222415-vxiet5n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vxiet5n",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 Linux 系统，TIME_WAIT 状态会持续 2MSL 后才会进入关闭状态。"
				}
			]
		},
		{
			"ID": "20221102222415-y25dyid",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-y25dyid",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后，服务端（被动关闭方）没有收到 ACK 报文前，还是处于 LAST_ACK 状态。"
				}
			]
		},
		{
			"ID": "20221102222415-9hch9q3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9hch9q3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果第四次挥手的 ACK 报文没有到达服务端，服务端就会重发 FIN 报文，重发次数仍然由前面介绍过的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数控制。"
				}
			]
		},
		{
			"ID": "20221102222415-jc0w3ld",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-jc0w3ld",
				"updated": "20221102222611"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 为 2，当第四次挥手一直丢失时，发生的过程如下：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 411px;",
						"style": "width: 401px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220152"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102220152-20221102222611-mjko2vm.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 401px;\" parent-style=\"max-width: 411px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n具体过程："
				}
			]
		},
		{
			"ID": "20221102222415-grotbhj",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-grotbhj",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-yyccwu4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-yyccwu4",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-12nj15i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-12nj15i",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当服务端重传第三次挥手报文达到 2 时，由于 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "tcp_orphan_retries"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 为 2， 达到了最大重传次数，于是再等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到客户端的第四次挥手（ACK 报文），那么服务端就会断开连接。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-20qmgpq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-20qmgpq",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-6xx6bkg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-6xx6bkg",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端在收到第三次挥手后，就会进入 TIME_WAIT 状态，开启时长为 2MSL 的定时器，如果途中再次收到第三次挥手（FIN 报文）后，就会重置定时器，当等待 2MSL 时长后，客户端就会断开连接。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-o288005",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-o288005",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么 TIME_WAIT 等待的时间是 2MSL？"
				}
			]
		},
		{
			"ID": "20221102222415-p8lt3df",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-p8lt3df",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MSL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 是 Maximum Segment Lifetime，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "报文最大生存时间"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，它是任何报文在网络上存在的最长时间，超过这个时间报文将被丢弃。因为 TCP 报文基于是 IP 协议的，而 IP 头中有一个 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TTL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字段，是 IP 数据报可以经过的最大路由数，每经过一个处理他的路由器此值就减 1，当此值为 0 则数据报将被丢弃，同时发送 ICMP 报文通知源主机。"
				}
			]
		},
		{
			"ID": "20221102222415-c8zxcg2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-c8zxcg2",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "MSL 与 TTL 的区别： MSL 的单位是时间，而 TTL 是经过路由跳数。所以 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "MSL 应该要大于等于 TTL 消耗为 0 的时间"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，以确保报文已被自然消亡。"
				}
			]
		},
		{
			"ID": "20221102222415-az6bl89",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-az6bl89",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "TTL 的值一般是 64，Linux 将 MSL 设置为 30 秒，意味着 Linux 认为数据报文经过 64 个路由器的时间不会超过 30 秒，如果超过了，就认为报文已经消失在网络中了"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-9lhrrfc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9lhrrfc",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TIME_WAIT 等待 2 倍的 MSL，比较合理的解释是： 网络中可能存在来自发送方的数据包，当这些发送方的数据包被接收方处理后又会向对方发送响应，所以"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "一来一回需要等待 2 倍的时间"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-1oqm22u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-1oqm22u",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "比如，如果被动关闭方没有收到断开连接的最后的 ACK 报文，就会触发超时重发 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "FIN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文，另一方接收到 FIN 后，会重发 ACK 给被动关闭方， 一来一去正好 2 个 MSL。"
				}
			]
		},
		{
			"ID": "20221102222415-4665xf3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-4665xf3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以看到 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "2MSL时长"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 这其实是相当于"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "至少允许报文丢失一次"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。比如，若 ACK 在一个 MSL 内丢失，这样被动方重发的 FIN 会在第 2 个 MSL 内到达，TIME_WAIT 状态的连接可以应对。"
				}
			]
		},
		{
			"ID": "20221102222415-s3kvogh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-s3kvogh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么不是 4 或者 8 MSL 的时长呢？你可以想象一个丢包率达到百分之一的糟糕网络，连续两次丢包的概率只有万分之一，这个概率实在是太小了，忽略它比解决它更具性价比。"
				}
			]
		},
		{
			"ID": "20221102222415-xpivjtt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-xpivjtt",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "2MSL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的时间是从"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "客户端接收到 FIN 后发送 ACK 开始计时的"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。如果在 TIME-WAIT 时间内，因为客户端的 ACK 没有传输到服务端，客户端又接收到了服务端重发的 FIN 报文，那么 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "2MSL 时间将重新计时"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-hs4n0jb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hs4n0jb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 Linux 系统里 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "2MSL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 默认是 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "60"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 秒，那么一个 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MSL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 也就是 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "30"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 秒。"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "Linux 系统停留在 TIME_WAIT 的时间为固定的 60 秒"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-uys8fza",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-uys8fza",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "其定义在 Linux 内核代码里的名称为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TCP_TIMEWAIT_LEN"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "："
				}
			]
		},
		{
			"ID": "20221102222415-4x02gv6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221102222415-4x02gv6",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "#define TCP_TIMEWAIT_LEN (60*HZ) /* how long to wait to destroy TIME-WAIT \n\t\t\t\t\t\t\t\t\tstate, about 60 seconds  */\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221102222415-99n5vw8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-99n5vw8",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果要修改 TIME_WAIT 的时间长度，只能修改 Linux 内核代码里 TCP_TIMEWAIT_LEN 的值，并重新编译 Linux 内核。"
				}
			]
		},
		{
			"ID": "20221102222415-kc5hacu",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-kc5hacu",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TIME_WAIT"
				}
			]
		},
		{
			"ID": "20221102222415-y0dy1d3",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-y0dy1d3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么需要 TIME_WAIT 状态？"
				}
			]
		},
		{
			"ID": "20221102222415-52in1qw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-52in1qw",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "主动发起关闭连接的一方，才会有 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TIME-WAIT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221102222415-9qly10m",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9qly10m",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "需要 TIME-WAIT 状态，主要是两个原因："
				}
			]
		},
		{
			"ID": "20221102222415-od1lzp9",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-od1lzp9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-b37hshv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-b37hshv",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-33nwsgy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-33nwsgy",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "防止历史连接中的数据，被后面相同四元组的连接错误的接收；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-52x892a",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-52x892a",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-lek344r",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-lek344r",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "保证「被动关闭连接」的一方，能被正确的关闭；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-f1x9ida",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-f1x9ida",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "原因一：防止历史连接中的数据，被后面相同四元组的连接错误的接收"
				}
			]
		},
		{
			"ID": "20221102222415-p8amnqd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-p8amnqd",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了能更好的理解这个原因，我们先来了解序列号（SEQ）和初始序列号（ISN）。"
				}
			]
		},
		{
			"ID": "20221102222415-d6mnj82",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-d6mnj82",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-p3ayqzf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-p3ayqzf",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-batg6qr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-batg6qr",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "序列号"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，是 TCP 一个头部字段，标识了 TCP 发送端到 TCP 接收端的数据流的一个字节，因为 TCP 是面向字节流的可靠协议，为了保证消息的顺序性和可靠性，TCP 为每个传输方向上的每个字节都赋予了一个编号，以便于传输成功后确认、丢失后重传以及在接收端保证不会乱序。"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "序列号是一个 32 位的无符号数，因此在到达 4G 之后再循环回到 0"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-ky1omkr",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-ky1omkr",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-d2roj56",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-d2roj56",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "初始序列号"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，在 TCP 建立连接的时候，客户端和服务端都会各自生成一个初始序列号，它是基于时钟生成的一个随机数，来保证每个连接都拥有不同的初始序列号。"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "初始化序列号可被视为一个 32 位的计数器，该计数器的数值每 4 微秒加 1，循环一次需要 4.55 小时"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-tw8au24",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-tw8au24",
				"updated": "20221102222918"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "给大家抓了一个包，下图中的 Seq 就是序列号，其中红色框住的分别是客户端和服务端各自生成的初始序列号。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 575px;",
						"style": "width: 565px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220524"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102220524-20221102222918-yyl2dp2.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 565px;\" parent-style=\"max-width: 575px;\"}"
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-zkmw6tk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-zkmw6tk",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通过前面我们知道，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "序列号和初始化序列号并不是无限递增的，会发生回绕为初始值的情况，这意味着无法根据序列号来判断新老数据"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-yzmo5r7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-yzmo5r7",
				"updated": "20221102222926"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "假设 TIME-WAIT 没有等待时间或时间过短，被延迟的数据包抵达后会发生什么呢？\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 520px;",
						"style": "width: 510px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220618"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102220618-20221102222926-tyaf2dq.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 510px;\" parent-style=\"max-width: 520px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n如上图："
				}
			]
		},
		{
			"ID": "20221102222415-t58iqvy",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-t58iqvy",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-vq7r00o",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-vq7r00o",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-smgjqxj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-smgjqxj",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端在关闭连接之前发送的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SEQ = 301"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 报文，被网络延迟了。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-cdgal4t",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-cdgal4t",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-qfw7iut",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-qfw7iut",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "接着，服务端以相同的四元组重新打开了新连接，前面被延迟的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SEQ = 301"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 这时抵达了客户端，而且该数据报文的序列号刚好在客户端接收窗口内，因此客户端会正常接收这个数据报文，但是这个数据报文是上一个连接残留下来的，这样就产生数据错乱等严重的问题。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-y53emw9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-y53emw9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了防止历史连接中的数据，被后面相同四元组的连接错误的接收，因此 TCP 设计了 TIME_WAIT 状态，状态会持续 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "2MSL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 时长，这个时间"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "足以让两个方向上的数据包都被丢弃，使得原来连接的数据包在网络中都自然消失，再出现的数据包一定都是新建立连接所产生的。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222944-t2he9db",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222944-t2he9db"
			}
		},
		{
			"ID": "20221102222415-h5w4crb",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-h5w4crb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "原因二：保证「被动关闭连接」的一方，能被正确的关闭"
				}
			]
		},
		{
			"ID": "20221102222415-qs48p9y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qs48p9y",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TIME-WAIT 作用是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "等待足够的时间以确保最后的 ACK 能让被动关闭方接收，从而帮助其正常关闭。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-v3t4x9a",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-v3t4x9a",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果客户端（主动关闭方）最后一次 ACK 报文（第四次挥手）在网络中丢失了，那么按照 TCP 可靠性原则，服务端（被动关闭方）会重发 FIN 报文。"
				}
			]
		},
		{
			"ID": "20221102222415-1dj5jm6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-1dj5jm6",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "假设客户端没有 TIME_WAIT 状态，而是在发完最后一次回 ACK 报文就直接进入 CLOSE 状态，如果该 ACK 报文丢失了，服务端则重传的 FIN 报文，而这时客户端已经进入到关闭状态了，在收到服务端重传的 FIN 报文后，就会回 RST 报文。"
				}
			]
		},
		{
			"ID": "20221102222415-7in5n0y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-7in5n0y",
				"updated": "20221102222957"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220710"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102220710-20221102222957-1ym8ngg.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-6b7timg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-6b7timg",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "服务端收到这个 RST 并将其解释为一个错误（Connection reset by peer），这对于一个可靠的协议来说不是一个优雅的终止方式。"
				}
			]
		},
		{
			"ID": "20221102222415-v49gaq6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-v49gaq6",
				"updated": "20221102223003"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了防止这种情况出现，客户端必须等待足够长的时间，确保服务端能够收到 ACK，如果服务端没有收到 ACK，那么就会触发 TCP 重传机制，服务端会重新发送一个 FIN，这样一去一来刚好两个 MSL 的时间。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102220726"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102220726-20221102223003-1sufpl4.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-fh7y3lb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-fh7y3lb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "客户端在收到服务端重传的 FIN 报文时，TIME_WAIT 状态的等待时间，会重置回 2MSL。"
				}
			]
		},
		{
			"ID": "20221102222415-947bk82",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-947bk82",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TIME_WAIT 过多有什么危害？"
				}
			]
		},
		{
			"ID": "20221102222415-3iobrn6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-3iobrn6",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "过多的 TIME-WAIT 状态主要的危害有两种："
				}
			]
		},
		{
			"ID": "20221102222415-uruyitx",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-uruyitx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-srovolk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-srovolk",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-850xocl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-850xocl",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "第一是占用系统资源，比如文件描述符、内存资源、CPU 资源、线程资源等；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-zewdahx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-zewdahx",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-c4fj333",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-c4fj333",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "第二是占用端口资源，端口资源也是有限的，一般可以开启的端口为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "32768～61000"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，也可以通过 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "net.ipv4.ip_local_port_range"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "参数指定范围。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-q98pwm4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-q98pwm4",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "客户端和服务端 TIME_WAIT 过多，造成的影响是不同的。"
				}
			]
		},
		{
			"ID": "20221102222415-z3lqtn3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-z3lqtn3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "如果客户端（主动发起关闭连接方）的 TIME_WAIT 状态过多"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，占满了所有端口资源，那么就无法对「目的 IP+ 目的 PORT」都一样的服务端发起连接了，但是被使用的端口，还是可以继续对另外一个服务端发起连接的。具体可以看我这篇文章："
				},
				{
					"Type": "NodeLink",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "客户端的端口可以重复使用吗？(opens new window)"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "https://xiaolincoding.com/network/3_tcp/port.html#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%A4%8D%E4%BD%BF%E7%94%A8%E5%90%97"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-79b7gh0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-79b7gh0",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因此，客户端（发起连接方）都是和「目的 IP+ 目的 PORT 」都一样的服务端建立连接的话，当客户端的 TIME_WAIT 状态连接过多的话，就会受端口资源限制，如果占满了所有端口资源，那么就无法再跟「目的 IP+ 目的 PORT」都一样的服务端建立连接了。"
				}
			]
		},
		{
			"ID": "20221102222415-az2dydb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-az2dydb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "不过，即使是在这种场景下，只要连接的是不同的服务端，端口是可以重复使用的，所以客户端还是可以向其他服务端发起连接的，这是因为内核在定位一个连接的时候，是通过四元组（源IP、源端口、目的IP、目的端口）信息来定位的，并不会因为客户端的端口一样，而导致连接冲突。"
				}
			]
		},
		{
			"ID": "20221102222415-ga1owmh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ga1owmh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "如果服务端（主动发起关闭连接方）的 TIME_WAIT 状态过多"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，并不会导致端口资源受限，因为服务端只监听一个端口，而且由于一个四元组唯一确定一个 TCP 连接，因此理论上服务端可以建立很多连接，但是 TCP 连接过多，会占用系统资源，比如文件描述符、内存资源、CPU 资源、线程资源等。"
				}
			]
		},
		{
			"ID": "20221102222415-84fomqi",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-84fomqi",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "重传机制"
				}
			]
		},
		{
			"ID": "20221102222415-qs0ild9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qs0ild9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 实现可靠传输的方式之一，是通过序列号与确认应答。"
				}
			]
		},
		{
			"ID": "20221102222415-1dpvq2n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-1dpvq2n",
				"updated": "20221102223108"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 TCP 中，当发送端的数据到达接收主机时，接收端主机会返回一个确认应答消息，表示已收到消息。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 321px;",
						"style": "width: 311px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223056"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223056-20221102223108-ms44qgn.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 311px;\" parent-style=\"max-width: 321px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n但在错综复杂的网络，并不一定能如上图那么顺利能正常的数据传输，万一数据在传输过程中丢失了呢？"
				}
			]
		},
		{
			"ID": "20221102222415-ct905fb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ct905fb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以 TCP 针对数据包丢失的情况，会用"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "重传机制"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "解决。"
				}
			]
		},
		{
			"ID": "20221102222415-qs451w5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qs451w5",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeMark",
					"Data": "mark",
					"Children": [
						{
							"Type": "NodeMark2OpenMarker"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "接下来说说常见的重传机制"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeMark2CloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "："
				}
			]
		},
		{
			"ID": "20221102222415-7hu4hch",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-7hu4hch",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-rn748lh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-rn748lh",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-q7b3wh0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-q7b3wh0",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "超时重传"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-w67viyk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-w67viyk",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-f2e8j7f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-f2e8j7f",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "快速重传"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-o5gdrz5",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-o5gdrz5",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "超时重传"
				}
			]
		},
		{
			"ID": "20221102222415-rb1tdew",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-rb1tdew",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "重传机制的其中一个方式，就是在发送数据时，设定一个定时器，当超过指定的时间后，没有收到对方的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 确认应答报文，就会重发该数据，也就是我们常说的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "超时重传"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-10alsca",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-10alsca",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 会在以下两种情况发生超时重传："
				}
			]
		},
		{
			"ID": "20221102222415-pru0uyy",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-pru0uyy",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-1vl5hay",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-1vl5hay",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-7gmiwt9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-7gmiwt9",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "数据包丢失"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-tb2aicr",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-tb2aicr",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-w7q5ps0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-w7q5ps0",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "确认应答丢失"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-u2gpfv8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-u2gpfv8",
				"updated": "20221102223117"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223232"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223232-20221102223117-hw1ko8i.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-roja4t6",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-roja4t6",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-6tdcgfd",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-6tdcgfd",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "超时时间应该设置为多少呢？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-b5qxmdn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-b5qxmdn",
				"updated": "20221102223123"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们先来了解一下什么是 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RTT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "（Round-Trip Time 往返时延），从下图我们就可以知道：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 562px;",
						"style": "width: 552px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223324"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223324-20221102223123-kw44l2y.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 552px;\" parent-style=\"max-width: 562px;\"}"
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-vsvjq22",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vsvjq22",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RTT"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 指的是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "数据发送时刻到接收到确认的时刻的差值"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，也就是包的往返时间。"
				}
			]
		},
		{
			"ID": "20221102222415-w6tt63y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-w6tt63y",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "超时重传时间是以 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RTO"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " （Retransmission Timeout 超时重传时间）表示。"
				}
			]
		},
		{
			"ID": "20221102222415-hhg0lq2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hhg0lq2",
				"updated": "20221102223131"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "假设在重传的情况下，超时时间 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RTO"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 「较长或较短」时，会发生什么事情呢？\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223420"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223420-20221102223131-a9pjcq6.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n上图中有两种超时时间不同的情况："
				}
			]
		},
		{
			"ID": "20221102222415-dmtxr80",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-dmtxr80",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-gyd4vdm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-gyd4vdm",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-k58gyrr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-k58gyrr",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当超时时间 "
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "RTO 较大"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "时，重发就慢，丢了老半天才重发，没有效率，性能差；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-cku8vnn",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-cku8vnn",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-yy2r6c0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-yy2r6c0",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当超时时间 "
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "RTO 较小"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "时，会导致可能并没有丢就重发，于是重发的就快，会增加网络拥塞，导致更多的超时，更多的超时导致更多的重发。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-uqfx2hk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-uqfx2hk",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "精确的测量超时时间 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RTO"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的值是非常重要的，这可让我们的重传机制更高效。"
				}
			]
		},
		{
			"ID": "20221102222415-nqldy4v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-nqldy4v",
				"updated": "20221102223137"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "根据上述的两种情况，我们可以得知，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "超时重传时间 RTO 的值应该略大于报文往返 RTT 的值"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223502"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223502-20221102223137-wrc1lk2.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-6da6dtv",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-6da6dtv",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "快速重传"
				}
			]
		},
		{
			"ID": "20221102222415-ox85e4o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ox85e4o",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 还有另外一种"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "快速重传（Fast Retransmit）机制"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，它"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "不以时间为驱动，而是以数据驱动重传"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-8l5v5mc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-8l5v5mc",
				"updated": "20221102223155"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "快速重传机制，是如何工作的呢？其实很简单，一图胜千言。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 487px;",
						"style": "width: 477px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223604"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223604-20221102223155-2rzxp12.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 477px;\" parent-style=\"max-width: 487px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n在上图，发送方发出了 1，2，3，4，5 份数据："
				}
			]
		},
		{
			"ID": "20221102222415-8osgu9p",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-8osgu9p",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-spxgw45",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-spxgw45",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-c2n7kse",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-c2n7kse",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "第一份 Seq1 先送到了，于是就 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Ack"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 回 2；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-67frkkc",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-67frkkc",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-5vi62sl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-5vi62sl",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "结果 Seq2 因为某些原因没收到，Seq3 到达了，于是还是 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Ack"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 回 2；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-4x0uhye",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-4x0uhye",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-qcgtilo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-qcgtilo",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "后面的 Seq4 和 Seq5 都到了，但还是 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Ack"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 回 2，因为 Seq2 还是没有收到；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-dj22sds",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-dj22sds",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-i78bn9k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-i78bn9k",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "发送端收到了三个 Ack = 2 的确认，知道了 Seq2 还没有收到，就会在定时器过期之前，重传丢失的 Seq2。"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-ctv408v",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-ctv408v",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ktadlux",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ktadlux",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "最后，收到了 Seq2，此时因为 Seq3，Seq4，Seq5 都收到了，于是 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Ack"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 回 6 。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-tst2206",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-tst2206",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，快速重传的工作方式是当收到三个相同的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文时，会在定时器过期之前，重传丢失的报文段。"
				}
			]
		},
		{
			"ID": "20221102222415-bmdinc8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-bmdinc8",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "快速重传机制只解决了一个问题，就是超时时间的问题，但是它依然面临着另外一个问题。就是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "重传的时候，是重传一个，还是重传所有的问题。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-pxt3tta",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-pxt3tta",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个例子，假设发送方发了 6 个数据，编号的顺序是 Seq1 ~ Seq6 ，但是 Seq2、Seq3 都丢失了，那么接收方在收到 Seq4、Seq5、Seq6 时，都是回复 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "ACK2"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 给发送方，但是发送方并不清楚这连续的 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "ACK2"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 是接收方收到哪个报文而回复的， 那是选择重传 Seq2 一个报文，还是重传 Seq2 之后已发送的所有报文呢（Seq2、Seq3、 Seq4、Seq5、 Seq6） 呢？"
				}
			]
		},
		{
			"ID": "20221102222415-raari4f",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-raari4f",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-uu5k8ut",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-uu5k8ut",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-erhaeq7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-erhaeq7",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果只选择重传 Seq2 一个报文，那么重传的效率很低。因为对于丢失的 Seq3 报文，还得在后续收到"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "三个重复的 ACK3"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 才能触发重传。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-1oseq42",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-1oseq42",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-3trhld0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-3trhld0",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果选择重传 Seq2 之后已发送的所有报文，虽然能同时重传已丢失的 Seq2 和 Seq3 报文，但是 Seq4、Seq5、Seq6 的报文是已经被接收过了，对于重传 Seq4 ～Seq6 折部分数据相当于做了一次无用功，浪费资源。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-pam08u2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-pam08u2",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以看到，不管是重传一个报文，还是重传已发送的报文，都存在问题。"
				}
			]
		},
		{
			"ID": "20221102222415-951sp97",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-951sp97",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了解决不知道该重传哪些 TCP 报文，于是就有 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 方法。"
				}
			]
		},
		{
			"ID": "20221102223203-58g1rbg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223203-58g1rbg"
			}
		},
		{
			"ID": "20221102222415-no7auez",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-no7auez",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "SACK 方法"
				}
			]
		},
		{
			"ID": "20221102222415-y3oqogx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-y3oqogx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "还有一种实现重传机制的方式叫："
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "（ Selective Acknowledgment）， "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "选择性确认"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-fslngoi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-fslngoi",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这种方式需要在 TCP 头部「选项」字段里加一个 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的东西，它"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "可以将已收到的数据的信息发送给「发送方」"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，这样发送方就可以知道哪些数据收到了，哪些数据没收到，知道了这些信息，就可以"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "只重传丢失的数据"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-9g5h183",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9g5h183",
				"updated": "20221102223215"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如下图，发送方收到了三次同样的 ACK 确认报文，于是就会触发快速重发机制，通过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 信息发现只有 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "200~299"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 这段数据丢失，则重发时，就只选择了这个 TCP 段进行重复。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 519px;",
						"style": "width: 509px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101223931"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101223931-20221102223215-7ruy1ga.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 509px;\" parent-style=\"max-width: 519px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n如果要支持 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，必须双方都要支持。在 Linux 下，可以通过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "net.ipv4.tcp_sack"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数打开这个功能（Linux 2.4 后默认打开）。"
				}
			]
		},
		{
			"ID": "20221102223227-txzaowx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223227-txzaowx"
			}
		},
		{
			"ID": "20221102222415-7412r98",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-7412r98",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Duplicate SACK"
				}
			]
		},
		{
			"ID": "20221102222415-ijovaeb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ijovaeb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Duplicate SACK 又称 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "D-SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，其主要"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "使用了 SACK 来告诉「发送方」有哪些数据被重复接收了。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-ecv7q3d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ecv7q3d",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "下面举例两个栗子，来说明 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "D-SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的作用。"
				}
			]
		},
		{
			"ID": "20221102222415-0ev2enp",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-0ev2enp",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "栗子一号：ACK 丢包"
				}
			]
		},
		{
			"ID": "20221102222415-b5um5o2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-b5um5o2",
				"updated": "20221102223238"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 508px;",
						"style": "width: 498px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224001"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224001-20221102223238-g0x3mkl.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 498px;\" parent-style=\"max-width: 508px;\"}"
				}
			]
		},
		{
			"ID": "20221102222415-l1x1b7h",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-l1x1b7h",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-5f06fz7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-5f06fz7",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-66ng8as",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-66ng8as",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "「接收方」发给「发送方」的两个 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 确认应答都丢失了，所以发送方超时后，重传第一个数据包（3000 ~ 3499）"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-s6y607t",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-s6y607t",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-zf9q42f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-zf9q42f",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "于是「接收方」发现数据是重复收到的，于是回了一个 SACK = 3000~3500"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，告诉「发送方」 3000~3500 的数据早已被接收了，因为 ACK 都到了 4000 了，已经意味着 4000 之前的所有数据都已收到，所以这个"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": " SACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 就代表着 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "D-SACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-prxelv5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-prxelv5",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-0gbz47y",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-0gbz47y",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "这样「发送方」就知道了，数据没有丢，是「接收方」的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 确认报文丢了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-1f174if",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-1f174if",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "栗子二号：网络延时"
				}
			]
		},
		{
			"ID": "20221102222415-yr32qh1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-yr32qh1",
				"updated": "20221102223249"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 488px;",
						"style": "width: 478px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224040"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224040-20221102223249-c4q30rf.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 478px;\" parent-style=\"max-width: 488px;\"}"
				}
			]
		},
		{
			"ID": "20221102222415-cym996u",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-cym996u",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-ccufahd",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-ccufahd",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-abpfe8i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-abpfe8i",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "数据包（1000~1499） 被网络延迟了，导致「发送方」没有收到 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Ack 1500"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的确认报文。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-bi1p62c",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-bi1p62c",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-dt6t9c9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-dt6t9c9",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "而后面报文到达的三个相同的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 确认报文，就触发了快速重传机制，但是在重传后，被延迟的数据包（1000~1499）又到了「接收方」；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-nnwl369",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-nnwl369",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-1jyrbbe",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-1jyrbbe",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "所以「接收方」回了一个 SACK=1000~1500，因为 ACK 已经到了 3000，所以这个 SACK 是 D-SACK，表示收到了重复的包。"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-wl0gq8d",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-wl0gq8d",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-dymj1ia",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-dymj1ia",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "这样发送方就知道快速重传触发的原因不是发出去的包丢了，也不是因为回应的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 包丢了，而是因为网络延迟了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-6scxt69",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-6scxt69",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可见，"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "D-SACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 有这么几个好处："
				}
			]
		},
		{
			"ID": "20221102222415-flwvb4q",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221102222415-flwvb4q",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-a6vbyqz",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221102222415-a6vbyqz",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ll77hc7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ll77hc7",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "可以让「发送方」知道，是发出去的包丢了，还是接收方回应的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 包丢了;"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-838nk2p",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221102222415-838nk2p",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-v7o8o19",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-v7o8o19",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "可以知道是不是「发送方」的数据包被网络延迟了;"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-x9ondgs",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221102222415-x9ondgs",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-uzewoqn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-uzewoqn",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "可以知道网络中是不是把「发送方」的数据包给复制了;"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-h8k2tg1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-h8k2tg1",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 Linux 下可以通过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "net.ipv4.tcp_dsack"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数开启/关闭这个功能（Linux 2.4 后默认打开）。"
				}
			]
		},
		{
			"ID": "20221102223256-bjxw6t0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223256-bjxw6t0"
			}
		},
		{
			"ID": "20221102222415-ex6om8c",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-ex6om8c",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "滑动窗口"
				}
			]
		},
		{
			"ID": "20221102222415-z9dmruf",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-z9dmruf",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-anjszs7",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-anjszs7",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "引入窗口概念的原因"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-riin068",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-riin068",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们都知道 TCP 是每发送一个数据，都要进行一次确认应答。当上一个数据包收到了应答了， 再发送下一个。"
				}
			]
		},
		{
			"ID": "20221102222415-eo43a6y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-eo43a6y",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这个模式就有点像我和你面对面聊天，你一句我一句。但这种方式的缺点是效率比较低的。"
				}
			]
		},
		{
			"ID": "20221102222415-qb1eom1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qb1eom1",
				"updated": "20221102223315"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果你说完一句话，我在处理其他事情，没有及时回复你，那你不是要干等着我做完其他事情后，我回复你，你才能说下一句话，很显然这不现实。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224312"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224312-20221102223315-0fokhfs.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n所以，这样的传输方式有一个缺点：数据包的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "往返时间越长，通信的效率就越低"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-bstyzhg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-bstyzhg",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为解决这个问题，TCP 引入了"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "窗口"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "这个概念。即使在往返时间较长的情况下，它也不会降低网络通信的效率。"
				}
			]
		},
		{
			"ID": "20221102222415-mmmeu9l",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-mmmeu9l",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么有了窗口，就可以指定窗口大小，窗口大小就是指"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "无需等待确认应答，而可以继续发送数据的最大值"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-4b1paen",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-4b1paen",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "窗口的实现实际上是操作系统开辟的一个缓存空间，发送方主机在等到确认应答返回之前，必须在缓冲区中保留已发送的数据。如果按期收到确认应答，此时数据就可以从缓存区清除"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-sse3ra5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-sse3ra5",
				"updated": "20221102223323"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "假设窗口大小为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "3"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 个 TCP 段，那么发送方就可以「连续发送」 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "3"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 个 TCP 段，并且中途若有 ACK 丢失，可以通过「下一个确认应答进行确认」。如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224406"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224406-20221102223323-06zj8y2.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n图中的 ACK 600 确认应答报文丢失，也没关系，因为可以通过下一个确认应答进行确认，只要发送方收到了 ACK 700 确认应答，就意味着 700 之前的所有数据「接收方」都收到了。这个模式就叫"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "累计确认"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "或者"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "累计应答"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-nxg1pcc",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-nxg1pcc",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-fe1j0dd",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-fe1j0dd",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "窗口大小由哪一方决定？"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "\nTCP 头里有一个字段叫 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "Window"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "，也就是窗口大小。"
						}
					]
				},
				{
					"ID": "20221102222415-evb1y57",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-evb1y57",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "这个字段是接收端告诉发送端自己还有多少缓冲区可以接收数据。于是发送端就可以根据这个接收端的处理能力来发送数据，而不会导致接收端处理不过来。"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-mjt24k8",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-mjt24k8",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "所以，"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "通常窗口的大小是由接收方的窗口大小来决定"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "的。发送方发送的数据大小不能超过接收方的窗口大小，否则接收方就无法正常接收到数据。"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-qz8kxdd",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-qz8kxdd",
				"updated": "20221102223330"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "发送方的滑动窗口"
				}
			]
		},
		{
			"ID": "20221102222415-hq7b757",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hq7b757",
				"updated": "20221102223337"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们先来看看发送方的窗口，下图就是发送方缓存的数据，根据处理的情况分成四个部分，其中深蓝色方框是发送窗口，紫色方框是可用窗口：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224610"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224610-20221102223337-3s3kek7.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-2j9l2e4",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-2j9l2e4",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-qys09yn",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-qys09yn",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-yyovz82",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-yyovz82",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 是已发送并收到 ACK确认的数据：1~31 字节"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-gqfy6kg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-gqfy6kg",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ne0cybt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ne0cybt",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 是已发送但未收到 ACK确认的数据：32~45 字节"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-y2zepyf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-y2zepyf",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-kk7b6bw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-kk7b6bw",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#3"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 是未发送但总大小在接收方处理范围内（接收方还有空间）：46~51字节"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-qs3pyr8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-qs3pyr8",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-g0rb85o",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-g0rb85o",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#4"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 是未发送但总大小超过接收方处理范围（接收方没有空间）：52字节以后"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102223351-v7aua80",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223351-v7aua80"
			}
		},
		{
			"ID": "20221102222415-rbp7nl0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-rbp7nl0",
				"updated": "20221102223347"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在下图，当发送方把数据「全部」都一下发送出去后，可用窗口的大小就为 0 了，表明可用窗口耗尽，在没收到 ACK 确认之前是无法继续发送数据了。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224704"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224704-20221102223347-gsluxcf.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102223354-w3ldzdi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223354-w3ldzdi"
			}
		},
		{
			"ID": "20221102222415-fwp47kp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-fwp47kp",
				"updated": "20221102223359"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在下图，当收到之前发送的数据 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "32~36"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字节的 ACK 确认应答后，如果发送窗口的大小没有变化，则"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "滑动窗口往右边移动 5 个字节，因为有 5 个字节的数据被应答确认"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，接下来 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "52~56"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字节又变成了可用窗口，那么后续也就可以发送 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "52~56"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 这 5 个字节的数据了。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224720"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224720-20221102223359-dnyoxya.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102223402-nw36spe",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223402-nw36spe"
			}
		},
		{
			"ID": "20221102222415-6gujg7q",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-6gujg7q",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "程序是如何表示发送方的四个部分的呢？"
				}
			]
		},
		{
			"ID": "20221102222415-h9bxv77",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-h9bxv77",
				"updated": "20221102223410"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 滑动窗口方案使用三个指针来跟踪在四个传输类别中的每一个类别中的字节。其中两个指针是绝对指针（指特定的序列号），一个是相对指针（需要做偏移）。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224744"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224744-20221102223410-kckln1j.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-4ulx9l9",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-4ulx9l9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-2eewt8x",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-2eewt8x",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-8jixf0w",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-8jixf0w",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.WND"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：表示发送窗口的大小（大小是由接收方指定的）；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-f94dr2k",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-f94dr2k",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-qrn7s87",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-qrn7s87",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.UNA"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "（Send Unacknoleged）：是一个绝对指针，它指向的是已发送但未收到确认的第一个字节的序列号，也就是 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的第一个字节。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-shofxw2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-shofxw2",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ca4sa1r",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ca4sa1r",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：也是一个绝对指针，它指向未发送但可发送范围的第一个字节的序列号，也就是 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#3"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的第一个字节。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-83ibij9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-83ibij9",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-v1p4jmp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-v1p4jmp",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "指向 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#4"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的第一个字节是个相对指针，它需要 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.UNA"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指针加上 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.WND"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 大小的偏移量，就可以指向 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#4"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的第一个字节了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-5h8doe7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-5h8doe7",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么可用窗口大小的计算就可以是：\n"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "可用窗口大小 = SND.WND -（SND.NXT - SND.UNA）"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-yvdp2bm",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-yvdp2bm",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接收方的滑动窗口"
				}
			]
		},
		{
			"ID": "20221102222415-zerlgf5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-zerlgf5",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接下来我们看看接收方的窗口，接收窗口相对简单一些，根据处理的情况划分成三个部分："
				}
			]
		},
		{
			"ID": "20221102222415-w97xpjt",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-w97xpjt",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-dacspte",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-dacspte",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-jo2gvm2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-jo2gvm2",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#1 + #2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 是已成功接收并确认的数据（等待应用进程读取）；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-azvp8mu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-azvp8mu",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-i9kbve6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-i9kbve6",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#3"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 是未收到数据但可以接收的数据；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-ect92uh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-ect92uh",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-wwk1w35",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-wwk1w35",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "#4"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 未收到数据并不可以接收的数据；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102223505-va4tccl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223505-va4tccl",
				"updated": "20221102223507"
			}
		},
		{
			"ID": "20221102222415-uyrpdyv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-uyrpdyv",
				"updated": "20221102223500"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221101224947"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221101224947-20221102223500-ohth09u.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n其中三个接收部分，使用两个指针进行划分:"
				}
			]
		},
		{
			"ID": "20221102222415-nzczmzu",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-nzczmzu",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-3a1gu0n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-3a1gu0n",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-e0nmtz8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-e0nmtz8",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.WND"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：表示接收窗口的大小，它会通告给发送方。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-xy930dt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-xy930dt",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ev249jj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ev249jj",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：是一个指针，它指向期望从发送方发送来的下一个数据字节的序列号，也就是 #3 的第一个字节。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-od5ym0n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-od5ym0n",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-24gbpc4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-24gbpc4",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "指向 #4 的第一个字节是个相对指针，它需要 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指针加上 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.WND"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 大小的偏移量，就可以指向 #4 的第一个字节了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-d6rab0p",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-d6rab0p",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-588ybjh",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-588ybjh",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "接收窗口和发送窗口的大小是相等的吗？"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "\n并不是完全相等，接收窗口的大小是"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "约等于"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "发送窗口的大小的。"
						}
					]
				},
				{
					"ID": "20221102222415-ro4ya04",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-ro4ya04",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "因为滑动窗口并不是一成不变的。比如，当接收方的应用进程读取数据的速度非常快的话，这样的话接收窗口可以很快的就空缺出来。那么新的接收窗口大小，是通过 TCP 报文中的 Windows 字段来告诉发送方。那么这个传输过程是存在时延的，所以接收窗口和发送窗口是约等于的关系。"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-p3y9dw7",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-p3y9dw7",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "流量控制"
				}
			]
		},
		{
			"ID": "20221102222415-yoi6cnz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-yoi6cnz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "发送方不能无脑的发数据给接收方，要考虑接收方处理能力。"
				}
			]
		},
		{
			"ID": "20221102222415-nyl56hg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-nyl56hg",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果一直无脑的发数据给对方，但对方处理不过来，那么就会导致触发重发机制，从而导致网络流量的无端的浪费。"
				}
			]
		},
		{
			"ID": "20221102222415-m6plb66",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-m6plb66",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了解决这种现象发生，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "TCP 提供一种机制可以让「发送方」根据「接收方」的实际接收能力控制发送的数据量，这就是所谓的流量控制。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-ba80hsu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ba80hsu",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "下面举个栗子，为了简单起见，假设以下场景："
				}
			]
		},
		{
			"ID": "20221102222415-lx9aulr",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-lx9aulr",
				"updated": "20221102223518"
			},
			"Children": [
				{
					"ID": "20221102222415-mgxoeu4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-mgxoeu4",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-tc519wr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-tc519wr",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端是接收方，服务端是发送方"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-0kasvbc",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-0kasvbc",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-mn5mr37",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-mn5mr37",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "假设接收窗口和发送窗口相同，都为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "200"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-l1wu7tn",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-l1wu7tn",
						"updated": "20221102223518"
					},
					"Children": [
						{
							"ID": "20221102222415-prgauf5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-prgauf5",
								"updated": "20221102223518"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "假设两个设备在整个传输过程中都保持相同的窗口大小，不受外界影响\n​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Properties": {
										"parent-style": "max-width: 477px;",
										"style": "width: 467px;"
									},
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "Pasted image 20221102133838"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/Pasted image 20221102133838-20221102223518-p1rnudd.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeKramdownSpanIAL",
									"Data": "{: style=\"width: 467px;\" parent-style=\"max-width: 477px;\"}"
								},
								{
									"Type": "NodeText",
									"Data": "\n根据上图的流量控制，说明下每个过程："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-0e1u6kb",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221102222415-0e1u6kb",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-78q2ael",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221102222415-78q2ael",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ltsk3bl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ltsk3bl",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端向服务端发送请求数据报文。这里要说明下，本次例子是把服务端作为发送方，所以没有画出服务端的接收窗口。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-vwyxurw",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221102222415-vwyxurw",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-zfw6kck",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-zfw6kck",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到请求报文后，发送确认报文和 80 字节的数据，于是可用窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Usable"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 减少为 120 字节，同时 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指针也向右偏移 80 字节后，指向 321，"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "这意味着下次发送数据的时候，序列号是 321。"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-5eafp1o",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221102222415-5eafp1o",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-beltc4t",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-beltc4t",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到 80 字节数据后，于是接收窗口往右移动 80 字节，"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 也就指向 321，"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "这意味着客户端期望的下一个报文的序列号是 321"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，接着发送确认报文给服务端。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-4bmge4q",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221102222415-4bmge4q",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-27yux7x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-27yux7x",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端再次发送了 120 字节数据，于是可用窗口耗尽为 0，服务端无法再继续发送数据。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-rkz8ze8",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221102222415-rkz8ze8",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-t75vh4z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-t75vh4z",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到 120 字节的数据后，于是接收窗口往右移动 120 字节，"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 也就指向 441，接着发送确认报文给服务端。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-j3j3il7",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20221102222415-j3j3il7",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-j9lmlzu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-j9lmlzu",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到对 80 字节数据的确认报文后，"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.UNA"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指针往右偏移后指向 321，于是可用窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Usable"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 增大到 80。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-mpl5kbp",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ny4=",
						"Num": 7
					},
					"Properties": {
						"id": "20221102222415-mpl5kbp",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-tdp8dpy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-tdp8dpy",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到对 120 字节数据的确认报文后，"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.UNA"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指针往右偏移后指向 441，于是可用窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Usable"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 增大到 200。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-cezm18g",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "OC4=",
						"Num": 8
					},
					"Properties": {
						"id": "20221102222415-cezm18g",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-lxopkco",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-lxopkco",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端可以继续发送了，于是发送了 160 字节的数据后，"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指向 601，于是可用窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Usable"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 减少到 40。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-wkvyrhi",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "OS4=",
						"Num": 9
					},
					"Properties": {
						"id": "20221102222415-wkvyrhi",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-83icj7e",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-83icj7e",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到 160 字节后，接收窗口往右移动了 160 字节，"
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "RCV.NXT"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 也就是指向了 601，接着发送确认报文给服务端。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-ytvq2yl",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MTAu",
						"Num": 10
					},
					"Properties": {
						"id": "20221102222415-ytvq2yl",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ficbjjj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ficbjjj",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到对 160 字节数据的确认报文后，发送窗口往右移动了 160 字节，于是 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "SND.UNA"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 指针偏移了 160 后指向 601，可用窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "Usable"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 也就增大至了 200。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102223530-996i1p5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223530-996i1p5"
			}
		},
		{
			"ID": "20221102222415-0sgwe96",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-0sgwe96",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "操作系统缓冲区与滑动窗口的关系"
				}
			]
		},
		{
			"ID": "20221102222415-kc3sutq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-kc3sutq",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "前面的流量控制例子，我们假定了发送窗口和接收窗口是不变的，但是实际上，发送窗口和接收窗口中所存放的字节数，都是放在操作系统内存缓冲区中的，而操作系统的缓冲区，会"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "被操作系统调整"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-y71ldsw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-y71ldsw",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当应用进程没办法及时读取缓冲区的内容时，也会对我们的缓冲区造成影响。"
				}
			]
		},
		{
			"ID": "20221102222415-w9axe30",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-w9axe30",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-pak8xqf",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-pak8xqf",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "那操作系统的缓冲区，是如何影响发送窗口和接收窗口的呢？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-lmfnp8z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-lmfnp8z",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "我们先来看看第一个例子"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。\n当应用程序没有及时读取缓存时，发送窗口和接收窗口的变化。"
				}
			]
		},
		{
			"ID": "20221102222415-c0q2z4b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-c0q2z4b",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "考虑以下场景："
				}
			]
		},
		{
			"ID": "20221102222415-bpipupf",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-bpipupf",
				"updated": "20221102223539"
			},
			"Children": [
				{
					"ID": "20221102222415-bmdhp7f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-bmdhp7f",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ltdeze8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ltdeze8",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端作为发送方，服务端作为接收方，发送窗口和接收窗口初始大小为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "360"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-j7gqiwj",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-j7gqiwj",
						"updated": "20221102223539"
					},
					"Children": [
						{
							"ID": "20221102222415-9muz0i4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-9muz0i4",
								"updated": "20221102223539"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端非常的繁忙，当收到客户端的数据时，应用层不能及时读取数据。\n​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Properties": {
										"parent-style": "max-width: 590px;",
										"style": "width: 580px;"
									},
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "Pasted image 20221102134329"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/Pasted image 20221102134329-20221102223539-r5kmzvm.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeKramdownSpanIAL",
									"Data": "{: style=\"width: 580px;\" parent-style=\"max-width: 590px;\"}"
								},
								{
									"Type": "NodeText",
									"Data": "\n根据上图的流量控制，说明下每个过程："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-poh946t",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221102222415-poh946t",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-5an2qxn",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221102222415-5an2qxn",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-6er1dyw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-6er1dyw",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端发送 140 字节数据后，可用窗口变为 220 （360 - 140）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-sv964ti",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221102222415-sv964ti",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-j5xxbid",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-j5xxbid",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到 140 字节数据，"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "但是服务端非常繁忙，应用进程只读取了 40 个字节，还有 100 字节占用着缓冲区，于是接收窗口收缩到了 260 （360 - 100）"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，最后发送确认信息时，将窗口大小通告给客户端。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-tgrk0ol",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221102222415-tgrk0ol",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-aj34try",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-aj34try",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到确认和窗口通告报文后，发送窗口减少为 260。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-rdan2uf",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221102222415-rdan2uf",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-3t3lt28",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-3t3lt28",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端发送 180 字节数据，此时可用窗口减少到 80。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-bnwhd9g",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221102222415-bnwhd9g",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-etnjq9n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-etnjq9n",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到 180 字节数据，"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "但是应用程序没有读取任何数据，这 180 字节直接就留在了缓冲区，于是接收窗口收缩到了 80 （260 - 180）"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，并在发送确认信息时，通过窗口大小给客户端。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-unp0kda",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20221102222415-unp0kda",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-gtqma6g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-gtqma6g",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到确认和窗口通告报文后，发送窗口减少为 80。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-lncduke",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ny4=",
						"Num": 7
					},
					"Properties": {
						"id": "20221102222415-lncduke",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-rt988vt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-rt988vt",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端发送 80 字节数据后，可用窗口耗尽。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-wwbyabe",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "OC4=",
						"Num": 8
					},
					"Properties": {
						"id": "20221102222415-wwbyabe",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-p2sho1h",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-p2sho1h",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到 80 字节数据，"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "但是应用程序依然没有读取任何数据，这 80 字节留在了缓冲区，于是接收窗口收缩到了 0"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，并在发送确认信息时，通过窗口大小给客户端。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-uhw5o8e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "OS4=",
						"Num": 9
					},
					"Properties": {
						"id": "20221102222415-uhw5o8e",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-k1s0shc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-k1s0shc",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到确认和窗口通告报文后，发送窗口减少为 0。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-jqdnquy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-jqdnquy",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可见最后窗口都收缩为 0 了，也就是发生了窗口关闭。当发送方可用窗口变为 0 时，发送方实际上会定时发送窗口探测报文，以便知道接收方的窗口是否发生了改变，这个内容后面会说，这里先简单提一下。"
				}
			]
		},
		{
			"ID": "20221102223557-oj5mmwt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223557-oj5mmwt"
			}
		},
		{
			"ID": "20221102222415-yrlrd2j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-yrlrd2j",
				"updated": "20221102223555"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "我们先来看看第二个例子。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n当服务端系统资源非常紧张的时候，操作系统可能会直接减少了接收缓冲区大小，这时应用程序又无法及时读取缓存数据，那么这时候就有严重的事情发生了，会出现数据包丢失的现象。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102134458"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102134458-20221102223555-upv8bea.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n说明下每个过程："
				}
			]
		},
		{
			"ID": "20221102222415-iki0ecm",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20221102222415-iki0ecm",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-0qlli34",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20221102222415-0qlli34",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-f3qk2t7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-f3qk2t7",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端发送 140 字节的数据，于是可用窗口减少到了 220。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-mf2irk2",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20221102222415-mf2irk2",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-vwess3z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-vwess3z",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "服务端因为现在非常的繁忙，操作系统于是就把接收缓存减少了 120 字节，当收到 140 字节数据后，又因为应用程序没有读取任何数据，所以 140 字节留在了缓冲区中，于是接收窗口大小从 360 收缩成了 100"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，最后发送确认信息时，通告窗口大小给对方。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-kkejudh",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20221102222415-kkejudh",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-i5wxn0l",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-i5wxn0l",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "此时客户端因为还没有收到服务端的通告窗口报文，所以不知道此时接收窗口收缩成了 100，客户端只会看自己的可用窗口还有 220，所以客户端就发送了 180 字节数据，于是可用窗口减少到 40。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-s9tf484",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20221102222415-s9tf484",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-gwljw08",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-gwljw08",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务端收到了 180 字节数据时，"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "发现数据大小超过了接收窗口的大小，于是就把数据包丢失了。"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-xowih9y",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20221102222415-xowih9y",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-gvv21w3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-gvv21w3",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "客户端收到第 2 步时，服务端发送的确认报文和通告窗口报文，尝试减少发送窗口到 100，把窗口的右端向左收缩了 80，此时可用窗口的大小就会出现诡异的负值。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-j3qhsd3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-j3qhsd3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，如果发生了先减少缓存，再收缩窗口，就会出现丢包的现象。"
				}
			]
		},
		{
			"ID": "20221102222415-deszu6n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-deszu6n",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "为了防止这种情况发生，TCP 规定是不允许同时减少缓存又收缩窗口的，而是采用先收缩窗口，过段时间再减少缓存，这样就可以避免了丢包情况。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102223609-wggdbxy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223609-wggdbxy"
			}
		},
		{
			"ID": "20221102222415-qbdbebj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-qbdbebj",
				"updated": "20221102223608"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "窗口关闭"
				}
			]
		},
		{
			"ID": "20221102222415-g82aohx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-g82aohx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在前面我们都看到了，TCP 通过让接收方指明希望从发送方接收的数据大小（窗口大小）来进行流量控制。"
				}
			]
		},
		{
			"ID": "20221102222415-8ztczch",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-8ztczch",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "如果窗口大小为 0 时，就会阻止发送方给接收方传递数据，直到窗口变为非 0 为止，这就是窗口关闭。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-kgwylp0",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-kgwylp0",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-11aizrk",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-11aizrk",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "窗口关闭潜在的危险"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-c6kzr5n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-c6kzr5n",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接收方向发送方通告窗口大小时，是通过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文来通告的。"
				}
			]
		},
		{
			"ID": "20221102222415-znc83zl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-znc83zl",
				"updated": "20221102223614"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么，当发生窗口关闭时，接收方处理完数据后，会向发送方通告一个窗口非 0 的 ACK 报文，如果这个通告窗口的 ACK 报文在网络中丢失了，那麻烦就大了\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 568px;",
						"style": "width: 558px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102134812"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102134812-20221102223614-srrx4rl.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 558px;\" parent-style=\"max-width: 568px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n这会导致发送方一直等待接收方的非 0 窗口通知，接收方也一直等待发送方的数据，如不采取措施，这种相互等待的过程，会造成了死锁的现象。"
				}
			]
		},
		{
			"ID": "20221102222415-65vowf3",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-65vowf3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-et5guo8",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-et5guo8",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "TCP 是如何解决窗口关闭时，潜在的死锁现象呢？\n为了解决这个问题，TCP 为每个连接设有一个持续定时器，"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "只要 TCP 连接一方收到对方的零窗口通知，就启动持续计时器。"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-et5b63a",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-et5b63a",
				"updated": "20221102223624"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "持续计时器超时"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，就会发送"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "窗口探测 ( Window probe ) 报文"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，而对方在确认这个探测报文时，给出自己现在的接收窗口大小。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102134931"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102134931-20221102223624-68s4dgh.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-qf7ttj0",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-qf7ttj0",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-2zrnxdp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-2zrnxdp",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-bpx2ffm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-bpx2ffm",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果接收窗口仍然为 0，那么收到这个报文的一方就会重新启动持续计时器；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-36v544p",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-36v544p",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ta9ttl2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ta9ttl2",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果接收窗口不是 0，那么死锁的局面就可以被打破了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-l7yjnb1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-l7yjnb1",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "窗口探测的次数一般为 3 次，每次大约 30-60 秒（不同的实现可能会不一样）。如果 3 次过后接收窗口还是 0 的话，有的 TCP 实现就会发 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RST"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 报文来中断连接。"
				}
			]
		},
		{
			"ID": "20221102222415-gwte445",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-gwte445",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "糊涂窗口综合症"
				}
			]
		},
		{
			"ID": "20221102222415-xpcfvrq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-xpcfvrq",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果接收方太忙了，来不及取走接收窗口里的数据，那么就会导致发送方的发送窗口越来越小。"
				}
			]
		},
		{
			"ID": "20221102222415-dtjn8j0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-dtjn8j0",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "到最后，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "如果接收方腾出几个字节并告诉发送方现在有几个字节的窗口，而发送方会义无反顾地发送这几个字节，这就是糊涂窗口综合症"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-cxs6zcx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-cxs6zcx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要知道，我们的 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TCP + IP"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 头有 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "40"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 个字节，为了传输那几个字节的数据，要搭上这么大的开销，这太不经济了。"
				}
			]
		},
		{
			"ID": "20221102222415-iqzqnf1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-iqzqnf1",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "就好像一个可以承载 50 人的大巴车，每次来了一两个人，就直接发车。除非家里有矿的大巴司机，才敢这样玩，不然迟早破产。要解决这个问题也不难，大巴司机等乘客数量超过了 25 个，才认定可以发车。"
				}
			]
		},
		{
			"ID": "20221102222415-j2go2pt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-j2go2pt",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "现举个糊涂窗口综合症的栗子，考虑以下场景："
				}
			]
		},
		{
			"ID": "20221102222415-hwstvk3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hwstvk3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接收方的窗口大小是 360 字节，但接收方由于某些原因陷入困境，假设接收方的应用层读取的能力如下："
				}
			]
		},
		{
			"ID": "20221102222415-yf6pre1",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-yf6pre1",
				"updated": "20221102223633"
			},
			"Children": [
				{
					"ID": "20221102222415-9l21r64",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-9l21r64",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-p2i96vz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-p2i96vz",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "接收方每接收 3 个字节，应用程序就只能从缓冲区中读取 1 个字节的数据；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-hh87324",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-hh87324",
						"updated": "20221102223633"
					},
					"Children": [
						{
							"ID": "20221102222415-69bn67c",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-69bn67c",
								"updated": "20221102223633"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在下一个发送方的 TCP 段到达之前，应用程序还从缓冲区中读取了 40 个额外的字节；\n​"
								},
								{
									"Type": "NodeImage",
									"Data": "span",
									"Children": [
										{
											"Type": "NodeBang"
										},
										{
											"Type": "NodeOpenBracket"
										},
										{
											"Type": "NodeLinkText",
											"Data": "Pasted image 20221102135010"
										},
										{
											"Type": "NodeCloseBracket"
										},
										{
											"Type": "NodeOpenParen"
										},
										{
											"Type": "NodeLinkDest",
											"Data": "assets/Pasted image 20221102135010-20221102223633-luuy30r.png"
										},
										{
											"Type": "NodeCloseParen"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "\n每个过程的窗口大小的变化，在图中都描述的很清楚了，可以发现窗口不断减少了，并且发送的数据都是比较小的了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-blto2w3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-blto2w3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，糊涂窗口综合症的现象是可以发生在发送方和接收方："
				}
			]
		},
		{
			"ID": "20221102222415-tw5wafa",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-tw5wafa",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-c80jgku",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-c80jgku",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-00bl138",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-00bl138",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "接收方可以通告一个小的窗口"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-7o13h6b",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-7o13h6b",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-fjd11nk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-fjd11nk",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "而发送方可以发送小数据"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-vsfaoh1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vsfaoh1",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "于是，要解决糊涂窗口综合症，就要同时解决上面两个问题就可以了："
				}
			]
		},
		{
			"ID": "20221102222415-15wrs84",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-15wrs84",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-9rks7ol",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-9rks7ol",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-hwehx69",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-hwehx69",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "让接收方不通告小窗口给发送方"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-hydystd",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-hydystd",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-cd2qsh8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-cd2qsh8",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "让发送方避免发送小数据"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102223640-ff3v15d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223640-ff3v15d"
			}
		},
		{
			"ID": "20221102222415-nd59b1h",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-nd59b1h",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "怎么让接收方不通告小窗口呢？"
				}
			]
		},
		{
			"ID": "20221102222415-hyuvn7b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hyuvn7b",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接收方通常的策略如下:"
				}
			]
		},
		{
			"ID": "20221102222415-g6xnivz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-g6xnivz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当「窗口大小」小于 min( MSS，缓存空间/2 ) ，也就是小于 MSS 与 1/2 缓存大小中的最小值时，就会向发送方通告窗口为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "0"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，也就阻止了发送方再发数据过来。"
				}
			]
		},
		{
			"ID": "20221102222415-uln83y3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-uln83y3",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "等到接收方处理了一些数据后，窗口大小 \u003e= MSS，或者接收方缓存空间有一半可以使用，就可以把窗口打开让发送方发送数据过来。"
				}
			]
		},
		{
			"ID": "20221102223643-cy2k5bi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223643-cy2k5bi"
			}
		},
		{
			"ID": "20221102222415-qzc9wcw",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-qzc9wcw",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "怎么让发送方避免发送小数据呢？"
				}
			]
		},
		{
			"ID": "20221102222415-7j9452x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-7j9452x",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "发送方通常的策略如下:"
				}
			]
		},
		{
			"ID": "20221102222415-1bbck0b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-1bbck0b",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "使用 Nagle 算法，该算法的思路是延时处理，只有满足下面两个条件中的任意一个条件，才可以发送数据："
				}
			]
		},
		{
			"ID": "20221102222415-i79yknf",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-i79yknf",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-8y3lwg8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-8y3lwg8",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-c0j6kze",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-c0j6kze",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "条件一：要等到窗口大小 \u003e= "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "MSS"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 并且 数据大小 \u003e= "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "MSS"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-l3q99a6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-l3q99a6",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-np1vj45",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-np1vj45",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "条件二：收到之前发送数据的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ack"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 回包；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-zggq2pi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-zggq2pi",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "只要上面两个条件都不满足，发送方一直在囤积数据，直到满足上面的发送条件。"
				}
			]
		},
		{
			"ID": "20221102222415-wsp4w3y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-wsp4w3y",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Nagle 伪代码如下："
				}
			]
		},
		{
			"ID": "20221102222415-oz29o0k",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221102222415-oz29o0k",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "if 有数据要发送 {\n    if 可用窗口大小 \u003e= MSS and 可发送的数据 \u003e= MSS {\n    \t立刻发送MSS大小的数据\n    } else {\n        if 有未确认的数据 {\n            将数据放入缓存等待接收ACK\n        } else {\n            立刻发送数据\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221102222415-modeyqq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-modeyqq",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意，如果接收方不能满足「不通告小窗口给发送方」，那么即使开了 Nagle 算法，也无法避免糊涂窗口综合症，因为如果对端 ACK 回复很快的话（达到 Nagle 算法的条件二），Nagle 算法就不会拼接太多的数据包，这种情况下依然会有小数据包的传输，网络总体的利用率依然很低。"
				}
			]
		},
		{
			"ID": "20221102222415-x5rye72",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-x5rye72",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "接收方得满足「不通告小窗口给发送方」+ 发送方开启 Nagle 算法，才能避免糊涂窗口综合症"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-djey5te",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-djey5te",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "另外，Nagle 算法默认是打开的，如果对于一些需要小数据包交互的场景的程序，比如，telnet 或 ssh 这样的交互性比较强的程序，则需要关闭 Nagle 算法。"
				}
			]
		},
		{
			"ID": "20221102222415-hqwuw4f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hqwuw4f",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以在 Socket 设置 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TCP_NODELAY"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 选项来关闭这个算法（关闭 Nagle 算法没有全局参数，需要根据每个应用自己的特点来关闭）"
				}
			]
		},
		{
			"ID": "20221102222415-2eantry",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221102222415-2eantry",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "setsockopt(sock_fd, IPPROTO_TCP, TCP_NODELAY, (char *)\u0026value, sizeof(int));\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221102222415-09kz3yz",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20221102222415-09kz3yz",
				"updated": "20221102222415"
			}
		},
		{
			"ID": "20221102223657-370ozjp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223657-370ozjp"
			}
		},
		{
			"ID": "20221102222415-pch4za2",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-pch4za2",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "拥塞控制"
				}
			]
		},
		{
			"ID": "20221102222415-xkppovl",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-xkppovl",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-wbct8v9",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-wbct8v9",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "为什么要有拥塞控制呀，不是有流量控制了吗？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-sk3yqqk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-sk3yqqk",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "前面的流量控制是避免「发送方」的数据填满「接收方」的缓存，但是并不知道网络的中发生了什么。"
				}
			]
		},
		{
			"ID": "20221102222415-lbs1sp8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-lbs1sp8",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一般来说，计算机网络都处在一个共享的环境。因此也有可能会因为其他主机之间的通信使得网络拥堵。"
				}
			]
		},
		{
			"ID": "20221102222415-vyiv93v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vyiv93v",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "在网络出现拥堵时，如果继续发送大量数据包，可能会导致数据包时延、丢失等，这时 TCP 就会重传数据，但是一重传就会导致网络的负担更重，于是会导致更大的延迟以及更多的丢包，这个情况就会进入恶性循环被不断地放大...."
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-osj50p4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-osj50p4",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，TCP 不能忽略网络上发生的事，它被设计成一个无私的协议，当网络发送拥塞时，TCP 会自我牺牲，降低发送的数据量。"
				}
			]
		},
		{
			"ID": "20221102222415-ck0nid7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ck0nid7",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "于是，就有了"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "拥塞控制"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，控制的目的就是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "避免「发送方」的数据填满整个网络。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-onbchmi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-onbchmi",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了在「发送方」调节所要发送数据的量，定义了一个叫做「"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "拥塞窗口"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "」的概念。"
				}
			]
		},
		{
			"ID": "20221102222415-z3ajyu1",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-z3ajyu1",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-zg5pbns",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-zg5pbns",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "什么是拥塞窗口？和发送窗口有什么关系呢？"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "\n"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "拥塞窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 是发送方维护的一个的状态变量，它会根据 "
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "网络的拥塞程度动态变化的"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "。\n我们在前面提到过发送窗口 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "swnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 和接收窗口 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "rwnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 是约等于的关系，那么由于加入了拥塞窗口的概念后，此时发送窗口的值是swnd = min(cwnd, rwnd)，也就是拥塞窗口和接收窗口中的最小值。"
						}
					]
				}
			]
		},
		{
			"ID": "20221102224400-pnv4rx3",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102224400-pnv4rx3",
				"updated": "20221102224400"
			},
			"Children": [
				{
					"ID": "20221102222415-s2q1baj",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-s2q1baj",
						"updated": "20221102224400"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "拥塞窗口 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "cwnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 变化的规则："
						}
					]
				},
				{
					"ID": "20221102222415-8tyzjxz",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20221102222415-8tyzjxz",
						"updated": "20221102224400"
					},
					"Children": [
						{
							"ID": "20221102222415-b7vl9z8",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-b7vl9z8",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-hc6rf6u",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-hc6rf6u",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "只要网络中没有出现拥塞，"
										},
										{
											"Type": "NodeCodeSpan",
											"Data": "code",
											"Children": [
												{
													"Type": "NodeCodeSpanOpenMarker"
												},
												{
													"Type": "NodeCodeSpanContent",
													"Data": "cwnd"
												},
												{
													"Type": "NodeCodeSpanCloseMarker"
												}
											]
										},
										{
											"Type": "NodeText",
											"Data": " 就会增大；"
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-imctpj3",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-imctpj3",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-jk0pgil",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-jk0pgil",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "但网络中出现了拥塞，"
										},
										{
											"Type": "NodeCodeSpan",
											"Data": "code",
											"Children": [
												{
													"Type": "NodeCodeSpanOpenMarker"
												},
												{
													"Type": "NodeCodeSpanContent",
													"Data": "cwnd"
												},
												{
													"Type": "NodeCodeSpanCloseMarker"
												}
											]
										},
										{
											"Type": "NodeText",
											"Data": " 就减少；"
										}
									]
								}
							]
						}
					]
				},
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				}
			]
		},
		{
			"ID": "20221102222415-z9k9bje",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-z9k9bje",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-i89mnu5",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-i89mnu5",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "那么怎么知道当前网络是否出现了拥塞呢？"
						}
					]
				},
				{
					"ID": "20221102222415-yd0guhf",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20221102222415-yd0guhf",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-2t3pouh",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-2t3pouh",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-40f6gnz",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-40f6gnz",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "其实只要「发送方」没有在规定时间内接收到 ACK 应答报文，也就是"
										},
										{
											"Type": "NodeStrong",
											"Data": "strong",
											"Children": [
												{
													"Type": "NodeStrongA6kOpenMarker",
													"Data": "**"
												},
												{
													"Type": "NodeText",
													"Data": "发生了超时重传，就会认为网络出现了拥塞。"
												},
												{
													"Type": "NodeStrongA6kCloseMarker",
													"Data": "**"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-58lnwa7",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-58lnwa7",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-wp5i951",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-wp5i951",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "拥塞控制有哪些控制算法？\n拥塞控制主要是四个算法:"
						}
					]
				},
				{
					"ID": "20221102222415-vnqbhtb",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20221102222415-vnqbhtb",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-kvoqwpe",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-kvoqwpe",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-wiejoti",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-wiejoti",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeStrong",
											"Data": "strong",
											"Children": [
												{
													"Type": "NodeStrongA6kOpenMarker",
													"Data": "**"
												},
												{
													"Type": "NodeText",
													"Data": "慢启动"
												},
												{
													"Type": "NodeStrongA6kCloseMarker",
													"Data": "**"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-jvdpb76",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-jvdpb76",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-uzmumdv",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-uzmumdv",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeStrong",
											"Data": "strong",
											"Children": [
												{
													"Type": "NodeStrongA6kOpenMarker",
													"Data": "**"
												},
												{
													"Type": "NodeText",
													"Data": "拥塞避免"
												},
												{
													"Type": "NodeStrongA6kCloseMarker",
													"Data": "**"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-6j75acc",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-6j75acc",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-96703mo",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-96703mo",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeStrong",
											"Data": "strong",
											"Children": [
												{
													"Type": "NodeStrongA6kOpenMarker",
													"Data": "**"
												},
												{
													"Type": "NodeText",
													"Data": "拥塞发生"
												},
												{
													"Type": "NodeStrongA6kCloseMarker",
													"Data": "**"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-wperbp7",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-wperbp7",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-6asr8rd",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-6asr8rd",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeStrong",
											"Data": "strong",
											"Children": [
												{
													"Type": "NodeStrongA6kOpenMarker",
													"Data": "**"
												},
												{
													"Type": "NodeText",
													"Data": "快速恢复"
												},
												{
													"Type": "NodeStrongA6kCloseMarker",
													"Data": "**"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-44sdo49",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-44sdo49",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "慢启动"
				}
			]
		},
		{
			"ID": "20221102222415-uodq9bp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-uodq9bp",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 在刚建立连接完成后，首先是有个慢启动的过程，这个慢启动的意思就是一点一点的提高发送数据包的数量，如果一上来就发大量的数据，这不是给网络添堵吗？"
				}
			]
		},
		{
			"ID": "20221102222415-kropx47",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-kropx47",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "慢启动的算法记住一个规则就行："
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "当发送方每收到一个 ACK，拥塞窗口 cwnd 的大小就会加 1。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-3ftug6r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-3ftug6r",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这里假定拥塞窗口 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "cwnd"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 和发送窗口 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "swnd"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 相等，下面举个栗子："
				}
			]
		},
		{
			"ID": "20221102222415-jffk7ye",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-jffk7ye",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-5iqythc",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-5iqythc",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-jw3aoqk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-jw3aoqk",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "连接建立完成后，一开始初始化 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd = 1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，表示可以传一个 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "MSS"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 大小的数据。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-qjad1j5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-qjad1j5",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-0oo0376",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-0oo0376",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当收到一个 ACK 确认应答后，cwnd 增加 1，于是一次能够发送 2 个"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-1rghug9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-1rghug9",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-nx51rz0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-nx51rz0",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当收到 2 个的 ACK 确认应答后， cwnd 增加 2，于是就可以比之前多发2 个，所以这一次能够发送 4 个"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-yx0u45u",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-yx0u45u",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ucp2na7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ucp2na7",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当这 4 个的 ACK 确认到来的时候，每个确认 cwnd 增加 1， 4 个确认 cwnd 增加 4，于是就可以比之前多发 4 个，所以这一次能够发送 8 个。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-vpzbyqv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vpzbyqv",
				"updated": "20221102223711"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "慢启动算法的变化过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102200451"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102200451-20221102223711-8vukpma.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n可以看出慢启动算法，发包的个数是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "指数性的增长"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-k71b5ru",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-k71b5ru",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-aeobw63",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-aeobw63",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "那慢启动涨到什么时候是个头呢？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-0cqiaom",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-0cqiaom",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "有一个叫慢启动门限 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " （slow start threshold）状态变量。"
				}
			]
		},
		{
			"ID": "20221102222415-rh80519",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-rh80519",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-9ft9yjv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-9ft9yjv",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-y9v6zdx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-y9v6zdx",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " \u003c "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ssthresh"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，使用慢启动算法。"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-bfked5m",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-bfked5m",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-71t5l12",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-71t5l12",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " \u003e= "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ssthresh"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 时，就会使用「拥塞避免算法」。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-ujwo13v",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-ujwo13v",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "拥塞避免算法"
				}
			]
		},
		{
			"ID": "20221102222415-7pvn197",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-7pvn197",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "前面说道，当拥塞窗口 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "cwnd"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 「超过」慢启动门限 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 就会进入拥塞避免算法。"
				}
			]
		},
		{
			"ID": "20221102222415-r52a7of",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-r52a7of",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一般来说 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的大小是 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "65535"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字节。"
				}
			]
		},
		{
			"ID": "20221102222415-0awyg6p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-0awyg6p",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么进入拥塞避免算法后，它的规则是："
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "每当收到一个 ACK 时，cwnd 增加 1/cwnd。"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-a30xof2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-a30xof2",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接上前面的慢启动的栗子，现假定 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "8"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "："
				}
			]
		},
		{
			"ID": "20221102222415-cwhx96z",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-cwhx96z",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-ni0id6w",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-ni0id6w",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-y2aaqme",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-y2aaqme",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 8 个 ACK 应答确认到来时，每个确认增加 1/8，8 个 ACK 确认 cwnd 一共增加 1，于是这一次能够发送 9 个 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "MSS"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 大小的数据，变成了"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "线性增长。"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-46yrjuf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-46yrjuf",
				"updated": "20221102223720"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "拥塞避免算法的变化过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102201300"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102201300-20221102223720-dawib8f.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n所以，我们可以发现，拥塞避免算法就是将原本慢启动算法的指数增长变成了线性增长，还是增长阶段，但是增长速度缓慢了一些。"
				}
			]
		},
		{
			"ID": "20221102222415-rn1cndz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-rn1cndz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "就这么一直增长着后，网络就会慢慢进入了拥塞的状况了，于是就会出现丢包现象，这时就需要对丢失的数据包进行重传。"
				}
			]
		},
		{
			"ID": "20221102222415-qyjxfhi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qyjxfhi",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当触发了重传机制，也就进入了「"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "拥塞发生算法"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "」。"
				}
			]
		},
		{
			"ID": "20221102222415-r6k05ph",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-r6k05ph",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "拥塞发生"
				}
			]
		},
		{
			"ID": "20221102222415-ih6837h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ih6837h",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当网络出现拥塞，也就是会发生数据包重传，重传机制主要有两种："
				}
			]
		},
		{
			"ID": "20221102222415-56df2t7",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-56df2t7",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-r848f3n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-r848f3n",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-o2h2nh7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-o2h2nh7",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "超时重传"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-ol962fy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-ol962fy",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-gcl63mk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-gcl63mk",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "快速重传"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-0gwa7i8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-0gwa7i8",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这两种使用的拥塞发送算法是不同的，接下来分别来说说。"
				}
			]
		},
		{
			"ID": "20221102222415-tnyomnn",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-tnyomnn",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-yjhfsns",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-yjhfsns",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "发生超时重传的拥塞发生算法"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-vijxaty",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vijxaty",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当发生了「超时重传」，则就会使用拥塞发生算法。"
				}
			]
		},
		{
			"ID": "20221102222415-8ke5pjp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-8ke5pjp",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这个时候，"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 和 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "cwnd"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 的值会发生变化："
				}
			]
		},
		{
			"ID": "20221102222415-vre30zl",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-vre30zl",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-tab0ice",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-tab0ice",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-sdyuenn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-sdyuenn",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ssthresh"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 设为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd/2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-h3efvlz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-h3efvlz",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-rqmezyp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-rqmezyp",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 重置为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "1"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " （是恢复为 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 初始化值，我这里假定 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 初始化值 1）"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-r2qbybc",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-r2qbybc",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-yc039d9",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-yc039d9",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "怎么查看系统的 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "cwnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 初始化值？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-tnmwbya",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-tnmwbya",
				"updated": "20221102223758"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Linux 针对每一个 TCP 连接的 cwnd 初始化值是 10，也就是 10 个 MSS，我们可以用 ss -nli 命令查看每一个 TCP 连接的 cwnd 初始化值，如下图\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102201606"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102201606-20221102223758-alzxauh.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102223801-6yjbmq4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223801-6yjbmq4"
			}
		},
		{
			"ID": "20221102222415-ffvl4uw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-ffvl4uw",
				"updated": "20221102223809"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "拥塞发生算法的变化如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102201616"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102201616-20221102223809-lzozbh9.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n接着，就重新开始慢启动，慢启动是会突然减少数据流的。这真是一旦「超时重传」，马上回到解放前。但是这种方式太激进了，反应也很强烈，会造成网络卡顿。"
				}
			]
		},
		{
			"ID": "20221102222415-31tx95q",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-31tx95q",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "就好像本来在秋名山高速漂移着，突然来个紧急刹车，轮胎受得了吗。。。"
				}
			]
		},
		{
			"ID": "20221102222415-nabcdab",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-nabcdab",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-unyoc3w",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-unyoc3w",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "发生快速重传的拥塞发生算法"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-qwrjud9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qwrjud9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "还有更好的方式，前面我们讲过「快速重传算法」。当接收方发现丢了一个中间包的时候，发送三次前一个包的 ACK，于是发送端就会快速地重传，不必等待超时再重传。"
				}
			]
		},
		{
			"ID": "20221102222415-tmlab2o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-tmlab2o",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 认为这种情况不严重，因为大部分没丢，只丢了一小部分，则 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 和 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "cwnd"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 变化如下："
				}
			]
		},
		{
			"ID": "20221102222415-d7p1gys",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-d7p1gys",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-walykp3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-walykp3",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-0vs5atk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-0vs5atk",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd = cwnd/2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " ，也就是设置为原来的一半;"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-h745id6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-h745id6",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-krf00ky",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-krf00ky",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ssthresh = cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": ";"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-mw8k3g9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-mw8k3g9",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-reztlts",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-reztlts",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "进入快速恢复算法"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102223817-yoh2thx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223817-yoh2thx"
			}
		},
		{
			"ID": "20221102222415-yxgweos",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-yxgweos",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "快速恢复"
				}
			]
		},
		{
			"ID": "20221102222415-djif3sm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-djif3sm",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeText",
									"Data": "快速重传"
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "和"
						},
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeText",
									"Data": "快速恢复算法"
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "一般同时使用"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，快速恢复算法是认为，你还能收到 3 个重复 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ACK"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 说明网络也不那么糟糕，所以没有必要像 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "RTO"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 超时那么强烈。"
				}
			]
		},
		{
			"ID": "20221102222415-g0ovcdh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-g0ovcdh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "正如前面所说，进入快速恢复之前，"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "cwnd"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 和 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "ssthresh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 已被更新了："
				}
			]
		},
		{
			"ID": "20221102222415-yo0ki76",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-yo0ki76",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-nhjbfky",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-nhjbfky",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-4uzkucw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-4uzkucw",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd = cwnd/2"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " ，也就是设置为原来的一半;"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-sn9zai9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-sn9zai9",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-caytrcb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-caytrcb",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ssthresh = cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": ";"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-3uj92ea",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-3uj92ea",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后，进入快速恢复算法如下："
				}
			]
		},
		{
			"ID": "20221102222415-qxzvtmi",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-qxzvtmi",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-t2c0wjz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-t2c0wjz",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-3mqmfl2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-3mqmfl2",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "拥塞窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd = ssthresh + 3"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " （ 3 的意思是确认有 3 个数据包被收到了）；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-rm6afm0",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-rm6afm0",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-ldzby95",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-ldzby95",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "重传丢失的数据包；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-qc9gqgj",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-qc9gqgj",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-0ldsvxh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-0ldsvxh",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果再收到重复的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，那么 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 增加 1；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-84p4qf0",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-84p4qf0",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-t60xmva",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-t60xmva",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果收到新数据的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 后，把 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 设置为第一步中的 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ssthresh"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 的值，原因是该 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "ACK"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 确认了新的数据，说明从 duplicated ACK 时的数据都已收到，该恢复过程已经结束，可以回到恢复之前的状态了，也即再次进入拥塞避免状态；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-k3fu6s0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-k3fu6s0",
				"updated": "20221102223827"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "快速恢复算法的变化过程如下图：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Properties": {
						"parent-style": "max-width: 579px;",
						"style": "width: 569px;"
					},
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102201632"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102201632-20221102223827-zr1iv4i.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"width: 569px;\" parent-style=\"max-width: 579px;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "\n也就是没有像「超时重传」一夜回到解放前，而是还在比较高的值，后续呈线性增长。"
				}
			]
		},
		{
			"ID": "20221102222415-px2vkb6",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-px2vkb6",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "延迟应答"
				}
			]
		},
		{
			"ID": "20221102222415-q25ho20",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-q25ho20",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果接收数据的主机立刻返回ACK应答, 这时候返回的窗口可能比较小."
				}
			]
		},
		{
			"ID": "20221102222415-f13axbx",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-f13axbx",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-vv650w1",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20221102222415-vv650w1",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-sf9mnqt",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-sf9mnqt",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-yv8icbt",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-yv8icbt",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "假设接收端缓冲区为1M. 一次收到了500K的数据; 如果立刻应答, 返回的窗口就是500K;"
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-548q0nc",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-548q0nc",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-16kbfof",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-16kbfof",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "但实际上可能处理端处理的速度很快, 10ms之内就把500K数据从缓冲区消费掉了;"
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-ob1kwg0",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-ob1kwg0",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-o301klw",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-o301klw",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "在这种情况下, 接收端处理还远没有达到自己的极限, 即使窗口再放大一些, 也能处理过来;"
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-9csj7km",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-9csj7km",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-vrjf1lb",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-vrjf1lb",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "如果接收端稍微等一会再应答, 比如等待200ms再应答, 那么这个时候返回的窗口大小就是1M;"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-jo81z11",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-jo81z11",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一定要记得, 窗口越大, 网络吞吐量就越大, 传输效率就越高. 我们的目标是在保证网络不拥塞的情况下尽量提高传输\n效率;"
				}
			]
		},
		{
			"ID": "20221102223908-fwrig15",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223908-fwrig15"
			}
		},
		{
			"ID": "20221102222415-52kia9z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-52kia9z",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么所有的包都可以延迟应答么? 肯定也不是;"
				}
			]
		},
		{
			"ID": "20221102222415-26kcs5l",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-26kcs5l",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-3dz4iw1",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20221102222415-3dz4iw1",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-u36hw4e",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-u36hw4e",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-730yan8",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-730yan8",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "数量限制: 每隔N个包就应答一次;"
										}
									]
								}
							]
						},
						{
							"ID": "20221102222415-gazgi63",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102222415-gazgi63",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"ID": "20221102222415-x8az353",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102222415-x8az353",
										"updated": "20221102222415"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "时间限制: 超过最大延迟时间就应答一次;\n具体的数量和超时时间, 依操作系统不同也有差异; 一般N取2, 超时时间取200ms;"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-j87wfpn",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-j87wfpn",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "捎带应答"
				}
			]
		},
		{
			"ID": "20221102222415-kgpc9k6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-kgpc9k6",
				"updated": "20221102223918"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在延迟应答的基础上, 我们发现, 很多情况下, 客户端服务器在应用层也是 \"一发一收\" 的. 意味着客户端给服务器说了 \"How are you\", 服务器也会给客户端回一个 \"Fine, thank you\";\n那么这个时候ACK就可以搭顺风车, 和服务器回应的 \"Fine, thank you\" 一起回给客户端\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102221926"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102221926-20221102223918-bknzw69.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-rnuxvwa",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-rnuxvwa",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "TCP 面向字节流协议"
				}
			]
		},
		{
			"ID": "20221102222415-02gxrrf",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-02gxrrf",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如何理解字节流？"
				}
			]
		},
		{
			"ID": "20221102222415-r06wmbh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-r06wmbh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "之所以会说 TCP 是面向字节流的协议，UDP 是面向报文的协议，是因为操作系统对 TCP 和 UDP 协议的"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "发送方的机制不同"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，也就是问题原因在发送方。"
				}
			]
		},
		{
			"ID": "20221102222415-6nq8yj9",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-6nq8yj9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-n31v89p",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-n31v89p",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "先来说说为什么 UDP 是面向报文的协议？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-skk8vcy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-skk8vcy",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当用户消息通过 UDP 协议传输时，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "操作系统不会对消息进行拆分"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，在组装好 UDP 头部后就交给网络层来处理，所以发出去的 UDP 报文中的数据部分就是完整的用户消息，也就是"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "每个 UDP 报文就是一个用户消息的边界"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，这样接收方在接收到 UDP 报文后，读一个 UDP 报文就能读取到完整的用户消息。"
				}
			]
		},
		{
			"ID": "20221102222415-wbkvwyn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-wbkvwyn",
				"updated": "20221102223930"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你可能会问，如果收到了两个 UDP 报文，操作系统是怎么区分开的？\n操作系统在收到 UDP 报文后，会将其插入到队列里，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "队列里的每一个元素就是一个 UDP 报文"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，这样当用户调用 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "recvfrom()"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 系统调用读数据的时候，就会从队列里取出一个数据，然后从内核里拷贝给用户缓冲区。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102203907"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102203907-20221102223930-jgjuj9l.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102222415-3sr66kh",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102222415-3sr66kh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102222415-e62bet4",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102222415-e62bet4",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "再来说说为什么 TCP 是面向字节流的协议？"
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-qem6j3e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-qem6j3e",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当用户消息通过 TCP 协议传输时，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "消息可能会被操作系统分组成多个的 TCP 报文"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，也就是一个完整的用户消息被拆分成多个 TCP 报文进行传输。"
				}
			]
		},
		{
			"ID": "20221102222415-3nelzdf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-3nelzdf",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这时，接收方的程序如果不知道发送方发送的消息的长度，也就是不知道消息的边界时，是无法读出一个有效的用户消息的，因为用户消息被拆分成多个 TCP 报文后，并不能像 UDP 那样，一个 UDP 报文就能代表一个完整的用户消息。"
				}
			]
		},
		{
			"ID": "20221102222415-nkcbuyh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-nkcbuyh",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "举个实际的例子来说明。"
				}
			]
		},
		{
			"ID": "20221102222415-bqx8874",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-bqx8874",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "发送方准备发送 「Hi.」和「I am Xiaolin」这两个消息。"
				}
			]
		},
		{
			"ID": "20221102222415-tvyao7p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-tvyao7p",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在发送端，当我们调用 send 函数完成数据“发送”以后，数据并没有被真正从网络上发送出去，只是从应用程序拷贝到了操作系统内核协议栈中。"
				}
			]
		},
		{
			"ID": "20221102222415-03d0rec",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-03d0rec",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "至于什么时候真正被发送，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "取决于发送窗口、拥塞窗口以及当前发送缓冲区的大小等条件"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。也就是说，我们不能认为每次 send 调用发送的数据，都会作为一个整体完整地消息被发送出去。"
				}
			]
		},
		{
			"ID": "20221102222415-hbn9tm8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-hbn9tm8",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果我们考虑实际网络传输过程中的各种影响，假设发送端陆续调用 send 函数先后发送 「Hi.」和「I am Xiaolin」 报文，那么实际的发送很有可能是这几种情况。"
				}
			]
		},
		{
			"ID": "20221102223942-gzd2cys",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223942-gzd2cys"
			}
		},
		{
			"ID": "20221102222415-vbfqmfu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-vbfqmfu",
				"updated": "20221102223940"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第一种情况，这两个消息被分到同一个 TCP 报文，像这样：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102203940"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102203940-20221102223940-vk2wvta.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102223944-6ckn9es",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223944-6ckn9es"
			}
		},
		{
			"ID": "20221102222415-kz2r2c0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-kz2r2c0",
				"updated": "20221102223953"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第二种情况，「I am Xiaolin」的部分随 「Hi」 在一个 TCP 报文中发送出去，像这样：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102204000"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102204000-20221102223953-lnnomr7.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102223947-9ww2y9w",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102223947-9ww2y9w"
			}
		},
		{
			"ID": "20221102222415-zv7gr29",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-zv7gr29",
				"updated": "20221102224000"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第三种情况，「Hi.」 的一部分随 TCP 报文被发送出去，另一部分和 「I am Xiaolin」 一起随另一个 TCP 报文发送出去，像这样。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102204017"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102204017-20221102224000-1tgip5k.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102224006-5qqpmk7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224006-5qqpmk7"
			}
		},
		{
			"ID": "20221102222415-0jb2yd4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-0jb2yd4",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "类似的情况还能举例很多种，这里主要是想说明，我们不知道 「Hi.」和 「I am Xiaolin」 这两个用户消息是如何进行 TCP 分组传输的。"
				}
			]
		},
		{
			"ID": "20221102222415-li2wia8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-li2wia8",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因此，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "我们不能认为一个用户消息对应一个 TCP 报文，正因为这样，所以 TCP 是面向字节流的协议"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-t1r5fwj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-t1r5fwj",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当两个消息的某个部分内容被分到同一个 TCP 报文时，就是我们常说的 TCP 粘包问题，这时接收方不知道消息的边界的话，是无法读出有效的消息。"
				}
			]
		},
		{
			"ID": "20221102222415-mh7nr6g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-mh7nr6g",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要解决这个问题，要交给"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "应用程序"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-bauvh8i",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-bauvh8i",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如何解决粘包？"
				}
			]
		},
		{
			"ID": "20221102222415-jijcut0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-jijcut0",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "粘包的问题出现是因为不知道一个用户消息的边界在哪，如果知道了边界在哪，接收方就可以通过边界来划分出有效的用户消息。"
				}
			]
		},
		{
			"ID": "20221102222415-1qantrr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-1qantrr",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一般有三种方式分包的方式："
				}
			]
		},
		{
			"ID": "20221102222415-lz1rtfo",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221102222415-lz1rtfo",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"ID": "20221102222415-7mk6f0y",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-7mk6f0y",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-6jneig1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-6jneig1",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "固定长度的消息；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-pu18vt7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-pu18vt7",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-h6hnjic",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-h6hnjic",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "特殊字符作为边界；"
								}
							]
						}
					]
				},
				{
					"ID": "20221102222415-uwg3ete",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221102222415-uwg3ete",
						"updated": "20221102222415"
					},
					"Children": [
						{
							"ID": "20221102222415-t1a2p39",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221102222415-t1a2p39",
								"updated": "20221102222415"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "自定义消息结构。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102222415-mtwzqiz",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-mtwzqiz",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "固定长度的消息"
				}
			]
		},
		{
			"ID": "20221102222415-9be8oix",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9be8oix",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这种是最简单方法，即每个用户消息都是固定长度的，比如规定一个消息的长度是 64 个字节，当接收方接满 64 个字节，就认为这个内容是一个完整且有效的消息。"
				}
			]
		},
		{
			"ID": "20221102222415-v8wyhhm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-v8wyhhm",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "但是这种方式灵活性不高，实际中很少用。"
				}
			]
		},
		{
			"ID": "20221102222415-ykt9z0h",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-ykt9z0h",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "特殊字符作为边界"
				}
			]
		},
		{
			"ID": "20221102222415-nys3wb9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-nys3wb9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们可以在两个用户消息之间插入一个特殊的字符串，这样接收方在接收数据时，读到了这个特殊字符，就把认为已经读完一个完整的消息。"
				}
			]
		},
		{
			"ID": "20221102222415-evt6oab",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-evt6oab",
				"updated": "20221102224027"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "HTTP 是一个非常好的例子。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102204119"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102204119-20221102224027-x6jbxuh.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\nHTTP 通过设置回车符、换行符作为 HTTP 报文协议的边界。"
				}
			]
		},
		{
			"ID": "20221102222415-o44buwp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-o44buwp",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "有一点要注意，这个作为边界点的特殊字符，如果刚好消息内容里有这个特殊字符，我们要对这个字符转义，避免被接收方当作消息的边界点而解析到无效的数据。"
				}
			]
		},
		{
			"ID": "20221102224041-1o0mx8v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224041-1o0mx8v"
			}
		},
		{
			"ID": "20221102222415-6pl4d91",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221102222415-6pl4d91",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "自定义消息结构"
				}
			]
		},
		{
			"ID": "20221102222415-9b15mpv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-9b15mpv",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们可以自定义一个消息结构，由包头和数据组成，其中包头包是固定大小的，而且包头里有一个字段来说明紧随其后的数据有多大。"
				}
			]
		},
		{
			"ID": "20221102222415-yttqehj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-yttqehj",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "比如这个消息结构体，首先 4 个字节大小的变量来表示数据长度，真正的数据则在后面。"
				}
			]
		},
		{
			"ID": "20221102222415-p6whgqq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221102222415-p6whgqq",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "Y3Bw"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "struct { \n    u_int32_t message_length; \n    char message_data[]; \n} message;\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221102222415-wb2midy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-wb2midy",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当接收方接收到包头的大小（比如 4 个字节）后，就解析包头的内容，于是就可以知道数据的长度，然后接下来就继续读取数据，直到读满数据的长度，就可以组装成一个完整到用户消息来处理了。"
				}
			]
		},
		{
			"ID": "20221102222415-rxhyqhd",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-rxhyqhd",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "既然 IP 层会分片，为什么 TCP 层还需要 MSS 呢？"
				}
			]
		},
		{
			"ID": "20221102222415-rol9166",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-rol9166",
				"updated": "20221102224104"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们先来认识下 MTU 和 MSS\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102214115"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102214115-20221102224104-go9y22y.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeBr",
					"Data": "br"
				}
			]
		},
		{
			"ID": "20221102224055-blm47ps",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224055-blm47ps"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MTU"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：一个网络包的最大长度，以太网中一般为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "1500"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字节；\n"
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MSS"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：除去 IP 和 TCP 头部之后，一个网络包所能容纳的 TCP 数据的最大长度；"
				}
			]
		},
		{
			"ID": "20221102222415-lppdq9r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-lppdq9r",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果在 TCP 的整个报文（头部 + 数据）交给 IP 层进行分片，会有什么异常呢？"
				}
			]
		},
		{
			"ID": "20221102222415-sd8xy3p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-sd8xy3p",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当 IP 层有一个超过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MTU"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 大小的数据（TCP 头部 + TCP 数据）要发送，那么 IP 层就要进行分片，把数据分片成若干片，保证每一个分片都小于 MTU。把一份 IP 数据报进行分片以后，由目标主机的 IP 层来进行重新组装后，再交给上一层 TCP 传输层。"
				}
			]
		},
		{
			"ID": "20221102222415-a17q53b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-a17q53b",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这看起来井然有序，但这存在隐患的，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "那么当如果一个 IP 分片丢失，整个 IP 报文的所有分片都得重传"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-784zufa",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-784zufa",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因为 "
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "IP 层本身没有超时重传机制，它由传输层的 TCP 来负责超时和重传"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221102222415-r6hr6d5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-r6hr6d5",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当某一个 IP 分片丢失后，接收方的 IP 层就无法组装成一个完整的 TCP 报文（头部 + 数据），也就无法将数据报文送到 TCP 层，所以接收方不会响应 ACK 给发送方，因为发送方迟迟收不到 ACK 确认报文，所以会触发超时重传，就会重发「整个 TCP 报文（头部 + 数据）」。"
				}
			]
		},
		{
			"ID": "20221102222415-3ruwfqv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-3ruwfqv",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因此，可以得知由 IP 层进行分片传输，是非常没有效率的。"
				}
			]
		},
		{
			"ID": "20221102222415-43gccya",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-43gccya",
				"updated": "20221102224131"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "所以，为了达到最佳的传输效能 TCP 协议在"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "建立连接的时候通常要协商双方的 MSS 值"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，当 TCP 层发现数据超过 MSS 时，则就先会进行分片，当然由它形成的 IP 包的长度也就不会大于 MTU ，自然也就不用 IP 分片了。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "Pasted image 20221102214145"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/Pasted image 20221102214145-20221102224131-8qrpjf6.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n经过 TCP 层分片后，如果一个 TCP 分片丢失后，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "进行重发时也是以 MSS 为单位"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，而不用重传所有的分片，大大增加了重传的效率。"
				}
			]
		},
		{
			"ID": "20221102222415-zl02an7",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221102222415-zl02an7",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "涉及到的专业名词"
				}
			]
		},
		{
			"ID": "20221102222415-r4idn72",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-r4idn72",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "MSL"
				}
			]
		},
		{
			"ID": "20221102222415-c4u96i9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-c4u96i9",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MSL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 是 Maximum Segment Lifetime，"
				},
				{
					"Type": "NodeStrong",
					"Data": "strong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "报文最大生存时间"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，它是任何报文在网络上存在的最长时间，超过这个时间报文将被丢弃。因为 TCP 报文基于是 IP 协议的，而 IP 头中有一个 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "TTL"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字段，是 IP 数据报可以经过的最大路由数，每经过一个处理他的路由器此值就减 1，当此值为 0 则数据报将被丢弃，同时发送 ICMP 报文通知源主机。"
				}
			]
		},
		{
			"ID": "20221102224239-pkurlke",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224239-pkurlke"
			}
		},
		{
			"ID": "20221102222415-w2uecsu",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-w2uecsu",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "MTU"
				}
			]
		},
		{
			"ID": "20221102222415-t6wpd5r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-t6wpd5r",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MTU"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：一个网络包的最大长度，以太网中一般为 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "1500"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 字节；"
				}
			]
		},
		{
			"ID": "20221102224237-kskci2b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224237-kskci2b"
			}
		},
		{
			"ID": "20221102222415-ppt1r9k",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-ppt1r9k",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "MSS"
				}
			]
		},
		{
			"ID": "20221102222415-pvjgq7d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-pvjgq7d",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "MSS"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "：除去 IP 和 TCP 头部之后，一个网络包所能容纳的 TCP 数据的最大长度；"
				}
			]
		},
		{
			"ID": "20221102224235-v9g4hji",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224235-v9g4hji"
			}
		},
		{
			"ID": "20221102222415-66fwwhu",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102222415-66fwwhu",
				"updated": "20221102222415"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "慢启动门限 ssthresh"
				}
			]
		},
		{
			"ID": "20221102222415-u4cubhe",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102222415-u4cubhe",
				"updated": "20221102224151"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "用来控"
				},
				{
					"Type": "NodeBlockRef",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeBlockRefID",
							"Data": "20221102222415-44sdo49"
						},
						{
							"Type": "NodeBlockRefSpace"
						},
						{
							"Type": "NodeBlockRefDynamicText",
							"Data": "慢启动"
						},
						{
							"Type": "NodeCloseParen"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221102224243-0ed478v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224243-0ed478v"
			}
		},
		{
			"ID": "20221102224217-mg1fl4d",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102224217-mg1fl4d",
				"updated": "20221102224229"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "cwnd"
				}
			]
		},
		{
			"ID": "20221102224448-gloj61u",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102224448-gloj61u",
				"updated": "20221102224448"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102224448-a22ebqd",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102224448-a22ebqd",
						"updated": "20221102224448"
					},
					"Children": [
						{
							"Type": "NodeMark",
							"Data": "mark",
							"Children": [
								{
									"Type": "NodeMark2OpenMarker"
								},
								{
									"Type": "NodeStrong",
									"Data": "strong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "什么是拥塞窗口？和发送窗口有什么关系呢？"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeMark2CloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "\n"
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "拥塞窗口 "
								},
								{
									"Type": "NodeCodeSpan",
									"Data": "code",
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "cwnd"
										},
										{
											"Type": "NodeCodeSpanCloseMarker"
										}
									]
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 是发送方维护的一个的状态变量，它会根据 "
						},
						{
							"Type": "NodeStrong",
							"Data": "strong",
							"Children": [
								{
									"Type": "NodeStrongA6kOpenMarker",
									"Data": "**"
								},
								{
									"Type": "NodeText",
									"Data": "网络的拥塞程度动态变化的"
								},
								{
									"Type": "NodeStrongA6kCloseMarker",
									"Data": "**"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": "。\n我们在前面提到过发送窗口 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "swnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 和接收窗口 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "rwnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 是约等于的关系，那么由于加入了拥塞窗口的概念后，此时发送窗口的值是swnd = min("
						},
						{
							"Type": "NodeText",
							"Data": "cwnd"
						},
						{
							"Type": "NodeText",
							"Data": ", rwnd)，也就是拥塞窗口和接收窗口中的最小值。"
						}
					]
				}
			]
		},
		{
			"ID": "20221102224448-ywr2uj7",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221102224448-ywr2uj7"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221102224448-msruf5h",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221102224448-msruf5h",
						"updated": "20221102224448"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "拥塞窗口 "
						},
						{
							"Type": "NodeCodeSpan",
							"Data": "code",
							"Children": [
								{
									"Type": "NodeCodeSpanOpenMarker"
								},
								{
									"Type": "NodeCodeSpanContent",
									"Data": "cwnd"
								},
								{
									"Type": "NodeCodeSpanCloseMarker"
								}
							]
						},
						{
							"Type": "NodeText",
							"Data": " 变化的规则："
						}
					]
				},
				{
					"ID": "20221102224448-l87pwgu",
					"Type": "NodeList",
					"ListData": {},
					"Properties": {
						"id": "20221102224448-l87pwgu",
						"updated": "20221102224448"
					},
					"Children": [
						{
							"ID": "20221102224448-wkfsbdm",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102224448-wkfsbdm",
								"updated": "20221102224448"
							},
							"Children": [
								{
									"ID": "20221102224448-eqwyxu0",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102224448-eqwyxu0",
										"updated": "20221102224448"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "只要网络中没有出现拥塞，"
										},
										{
											"Type": "NodeCodeSpan",
											"Data": "code",
											"Children": [
												{
													"Type": "NodeCodeSpanOpenMarker"
												},
												{
													"Type": "NodeCodeSpanContent",
													"Data": "cwnd"
												},
												{
													"Type": "NodeCodeSpanCloseMarker"
												}
											]
										},
										{
											"Type": "NodeText",
											"Data": " 就会增大；"
										}
									]
								}
							]
						},
						{
							"ID": "20221102224448-nwgtc68",
							"Type": "NodeListItem",
							"ListData": {
								"BulletChar": 42,
								"Marker": "Kg=="
							},
							"Properties": {
								"id": "20221102224448-nwgtc68",
								"updated": "20221102224448"
							},
							"Children": [
								{
									"ID": "20221102224448-k8rsiq9",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221102224448-k8rsiq9",
										"updated": "20221102224448"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "但网络中出现了拥塞，"
										},
										{
											"Type": "NodeCodeSpan",
											"Data": "code",
											"Children": [
												{
													"Type": "NodeCodeSpanOpenMarker"
												},
												{
													"Type": "NodeCodeSpanContent",
													"Data": "cwnd"
												},
												{
													"Type": "NodeCodeSpanCloseMarker"
												}
											]
										},
										{
											"Type": "NodeText",
											"Data": " 就减少；"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221102224234-s69xfyq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224234-s69xfyq"
			}
		},
		{
			"ID": "20221102224916-58zh2c2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102224916-58zh2c2",
				"updated": "20221102224920"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "tcp_synack_retries"
				}
			]
		},
		{
			"ID": "20221102224917-f003ack",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224917-f003ack"
			}
		},
		{
			"ID": "20221102215517-1xgu2pb",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221102215517-1xgu2pb",
				"updated": "20221102224515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "tcp_orphan_retries"
				}
			]
		},
		{
			"ID": "20221102224803-fxiy9on",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224803-fxiy9on",
				"updated": "20221102224803"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果第一次挥手丢失了，那么客户端迟迟收不到被动方的 ACK 的话，也就会触发超时重传机制，重传 FIN 报文，重发次数由 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 参数控制。"
				}
			]
		},
		{
			"ID": "20221102224803-kp5um5b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102224803-kp5um5b",
				"updated": "20221102224803"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当客户端重传 FIN 报文的次数超过 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "tcp_orphan_retries"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 后，就不再发送 FIN 报文，则会在等待一段时间（时间为上一次超时时间的 2 倍），如果还是没能收到第二次挥手，那么直接进入到 "
				},
				{
					"Type": "NodeCodeSpan",
					"Data": "code",
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "close"
						},
						{
							"Type": "NodeCodeSpanCloseMarker"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": " 状态。"
				}
			]
		},
		{
			"ID": "20221102215517-6uw0ahm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102215517-6uw0ahm"
			}
		},
		{
			"ID": "20221102215518-u9wnicx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221102215518-u9wnicx"
			}
		}
	]
}