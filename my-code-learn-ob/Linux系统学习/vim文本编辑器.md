# vim的基本概念

课堂上我们讲解vim的三种模式(其实有好多模式，目前掌握这3种即可),分别是==命令模式（command mode）==、==插入模式（Insert mode）== 和 ==底行模式（last line mode）==

* 正常/普通/命令模式(Normal mode)
>控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入Insert mode下，或者到 last line mode

* 插入模式(Insert mode)
>只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。该模式是我们后面用的最频繁的编辑模式。

* 末行模式(last line mode)
>文件保存或退出，也可以进行文件替换，找字符串，列出行号等操作。 在命令模式下，shift+: 即可进入该模式。要查看你的所有模式：打开vim，底行模式直接输入


## vim正常模式命令集

命令模式：

光标相关：

>`h`(左)   `j`(下)  `k`(上)   `l`(右)
>

>光标位置锚点：`shitf+^`(行首)`shift+$`(行尾)
>
>`gg`(起始行)         `shift+g`(结束行)    `n+shift+g`(指定行)
>
>`b/w`:按照单词为单位进行前后光标移动

文本操作

>`yy`:复制当前行
>
>`nyy`:复制当前行及其之后的n行，包含当前行
>
>`u`:撤销误操作
>
>`p`:粘贴，`np`:一次重复粘贴n行
>
>`dd`:删除当前光标所在行，支持ndddd->p:剪切功能
>
>`shift-+~`:快速大小写切换
>
>`x`:左向右删除光标之后的一个字符，支持`nx`
>
>`X`:右向左也是支持`nX`
>
>`r`:替换一个字符，光标所在的字符，支持`n r shift+r`:替换模式，直接进行多个内容的替换
>
>`ctrl+r`:撤销最近的撤销




## 底行模式：
在正常模式下敲：`:`  , 就可以进入底行模式
>`set nu`:调出行号set nonu:取消行号
>
>`vs [文件]`：多文件操作[ctrl+w+w]
>
>`w`:保存
>
>`q`:退出
>
>`!` :强制[w!,q!,wq]
>
>`n` : 在多文件中切换下一个文件, `N` 为切换上一个文件
>
>




# vim 的配置
## 配置文件的位置
> * 在目录 /etc/ 下面，有个名为`vimrc`的文件，这是系统中公共的vim配置文件，对==所有用户==都有效。
>
> * 而在==每个用户==的**主目录**下，都可以==自己建立私有的配置文件==，命名为：“`.vimrc`”。例如，/root目录下，通常已经存在一个.vimrc文件,如果不存在，则创建之。
>
> * 切换用户成为自己执行 `su` ，进入自己的主工作目录,执行 `cd ~`
>
> * 打开自己目录下的`.vimrc`文件，执行 `vim  .vimrc`


# vim替换命令
**一、Vim替换字符串命令的语法**

Vim替换字符串命令的基本语法是 `:[range]s/目标字符串/替换字符串/[option]`，其中range和option字段都可以缺省不填。

下面介绍VIM替换字符串各个变量的含义：

## range:表示搜索范围，默认表示当前行;

  range字段值1,10表示从第1到第10行;

  %表示整个文件(相当于1,$);

  而.,$代表从当前行到本文件的末尾

**s：substitute的简写，表示执行替换字符串操作;**

## option:表示操作类型，默认只对第一个匹配的字符进行替换；

option字段值g(global)表示全局替换;

c(comfirm)表示操作时需要确认;

i(ignorecase)表示不区分大小写;

vim替换字符串的这些选项可以组合使用


## 二、Vim替换命令举例

vim全局替换命令并要求对替换字符串命令进行确认操作

**将所有的Vim字符串替换为vim字符串**

1,`$s/Vim/vim/gc` 会出现提示”`replace with foo(y/n/a/q/l/^E/^Y)?`”，询问是否确认执行

待选择操作的含义包括：

y:确认执行这个替换将将所有Vim替换成vim;

n:取消这个本交Vim替换命令的操作;

a:执行本次所有替换字符串操作且不再询问;

q:退出当前vim字符串替换操作而不做任何改动;

l:替换完当前匹配点后退出(last)

Ctrl + E:向上翻滚一行

Ctrl + Y:向下翻滚一行

**2 将光标所在行出现的所有包含line的字符串中line替换为lines**

`:s/line/lines/g`表示将光标所在当前行的line全局替换为lines

**3将从2行到10行中出现的所有包含line的字符串中的line替换为lines**

`:2,10s/line/lines/g`表示将2~3行的line全局替换为lines

**4。全文的行首加入//字符，批量注释时非常有用**

`:%s/^/\/\//`表示在全文范围行首替换插入//，注意在Vim中需要将/进行转义后才可以替换

**5.将所有行尾多余的空格删除**

`:%s= *$==`表示全局替换行尾的一个或多个空格，更多正则表达式的说明可以参考Vim正则表达式