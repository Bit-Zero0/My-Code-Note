**概念：** 指令（Directives）是 Vue 提供的带有 **v- 前缀** 的 特殊 标签**属性**。

为啥要学：提高程序员操作 DOM 的效率。

vue 中的指令按照不同的用途可以分为如下 6 大类
- 内容渲染指令（`v-html`、`v-text`）
- 条件渲染指令（`v-show`、`v-if`、`v-else`、`v-else-if`）
- 事件绑定指令（`v-on`）
- 属性绑定指令 （`v-bind`）
- 双向绑定指令（`v-model`）
- 列表渲染指令（`v-for`）

==**指令是 vue 开发中最基础、最常用、最简单的知识点。**==

# 内容渲染指令
内容渲染指令用来辅助开发者渲染 DOM 元素的文本内容。常用的内容渲染指令有如下2 个：

 ## **`v-text`（类似innerText）**
- - 使用语法：`<p v-text="uname">hello</p>`，意思是将 uame 值渲染到 p 标签中
  - 类似 innerText，使用该语法，会覆盖 p 标签原有内容


## **`v-html`（类似 innerHTML）**
- - 使用语法：`<p v-html="intro">hello</p>`，意思是将 intro 值渲染到 p 标签中
  - 类似 innerHTML，使用该语法，会覆盖 p 标签原有内容
  - 类似 innerHTML，使用该语法，能够将HTML标签的样式呈现出来。

## 示例代码
```html
  <div id="app">
    <h2>个人信息</h2>
	// 既然指令是vue提供的特殊的html属性，所以咱们写的时候就当成属性来用即可
    <p v-text="uname">姓名：</p> 
    <p v-html="intro">简介：</p>
  </div> 

<script>
        const app = new Vue({
            el:'#app',
            data:{
                uname:'张三',
                intro:'<h2>这是一个<strong>非常优秀</strong>的boy<h2>'
            }
        })
</script>
```
运行结果
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230817215053.png)


# 条件渲染指令
条件判断指令，用来辅助开发者按需控制 DOM 的显示与隐藏。条件渲染指令有如下两个，分别是：

## `v-show`
   1. 作用：  控制元素显示隐藏
   2. 语法： ` v-show = "表达式"`   表达式值为 **`true` 显示，`false` 隐藏**
   3. 原理：  切换 `display:none` **控制显示隐藏**
   4. 场景：**频繁切换显示隐藏的场景**

>如小米官网的一些控件
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230817215305.png)

## `v-if`
1. 作用：  控制元素显示隐藏（条件渲染）
2. 语法：  `v-if= "表达式"`          表达式值 **`true`显示**， **`false` 隐藏**
3. 原理：  基于条件判断，是否**创建 或 移除元素节点**
4. 场景：  要么显示，要么隐藏，不频繁切换的场景

> 如小米官网的登录提示 , 登录完成后就可以移除这一组件了
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230817215502.png)


## v-if 和 v-show 的示例代码：
```html
<div id="app">
    <div v-show="flag" class="box">我是v-show控制的盒子</div>
    <div v-if="flag" class="box">我是v-if控制的盒子</div>
</div>
  
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script>
    const app = new Vue({
      el: '#app',
      data: {
        flag: true
      }
    })
</script>
```

实际代码中,是有CSS样式的, 篇幅有限, 我这里就不列出了
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230817220100.png)

> 当我们将 **`flag`** 改为 `false` 时 , 虽然两个盒子就看不见了, 但区别是:==第一个盒子就被隐藏 , 第二个盒子则被移除了==
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230817220340.png)

>小提示: 在浏览器中 按下 **F11** 即可进入控制台, 安装了[[1. Vue基础介绍#Vue开发者工具安装|插件]]即可使用上图功能 

## 1. v-else 和 v-else-if
   1. 作用：辅助`v-if`进行判断渲染
   2. 语法：`v-else`  `v-else-if="表达式"`
   3. 需要紧接着`v-if`使用

示例代码：
```html
  <div id="app">
    <p v-if="gender === 1">性别：♂ 男</p>
    <p v-else>性别：♀ 女</p>
    <hr>
    <p v-if="score >= 90">成绩评定A：奖励电脑一台</p>
    <p v-else-if="score >= 70">成绩评定B：奖励周末郊游</p>
    <p v-else-if="score >= 60">成绩评定C：奖励零食礼包</p>
    <p v-else>成绩评定D：惩罚一周不能玩手机</p>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>

    const app = new Vue({
      el: '#app',
      data: {
        gender: 2,
        score: 95
      }
    })
  </script>
```

运行结果:
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230817220756.png)


# 事件绑定指令 v-on
使用Vue时，如需为DOM注册事件，及其的简单，语法如下：

- `<button v-on:事件名="内联语句">按钮</button>`
- `<button v-on:事件名="处理函数">按钮</button>`
- `<button v-on:事件名="处理函数(实参)">按钮</button>`
- `v-on:` 简写为 `@`

## 内联语句
```html
<div id="app">
    <button @click="count--">-</button>
    <span>{{ count }}</span>
    <button v-on:click="count++">+</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

<script>
    const app = new Vue({
      el: '#app',
      data: {
        count: 100
      }
    })
</script>
```

## 事件处理函数 #todo
注意：
- **事件处理函数应该写到一个跟data同级的配置项（`methods`）中**
- `methods`中的函数内部的`this`都指向Vue实例
```html
<div id="app">
    <button>切换显示隐藏</button>
    <h1 v-show="isShow">黑马程序员</h1>
</div>
  
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  
<script>
	const app = new Vue({
	  el: '#app',
	  data: {
		isShow: true
	  }
	})
</script>
```


## 给事件处理函数传参
- 如果不传递任何参数，则方法无需加小括号；`methods`方法中可以直接使用 `e` 当做事件对象
- 如果传递了参数，则实参 `$event` 表示事件对象，固定用法。
```html
 <style>
    .box {
      border: 3px solid #000000;
      border-radius: 10px;
      padding: 20px;
      margin: 20px;
      width: 200px;
    }
    h3 {
      margin: 10px 0 20px 0;
    }
    p {
      margin: 20px;
    }
  </style>
</head>
<body>

  <div id="app">
    <div class="box">
      <h3>小黑自动售货机</h3>
      <button @click="buy(5)">可乐5元</button>
      <button @click="buy(10)">咖啡10元</button>
      <button @click="buy(8)">牛奶8元</button>
    </div>
    <p>银行卡余额：{{ money }}元</p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        money: 100
      },
      methods: {
        buy (price) {
          this.money -= price
        }
      }
    })
  </script>
</body>
```


## v-on常用事件名
**v-on** 除了可以绑定 `click` 这个事件, 也还有很多可以绑定的其他事件.

|事件名|	触发条件|
|:-:|:--|
|`keydown`|	按下任意按键|
|`keypress`|	除 Shift、Fn、CapsLock 外的任意键被按住（连续触发）|
|`keyup`|	释放任意按键|
|`click`	|在元素上 按下并释放任意鼠标按键|
|`auxclick`	|已在元素上按下并释放指针设备按钮（任何非主按钮）|
|`contextmenu`	|右键点击（在右键菜单显示前触发）|
|`dblclick`	|在元素上双击鼠标按钮。|
|`mousedown`	|在元素上按下任意鼠标按钮。|
|`mouseenter`|	指针移到有事件监听的元素内。|
|`mouseleave`	|指针移出元素范围外（不冒泡）。|
|`mousemove`|	指针在元素内移动时持续触发。|
|`mouseover`	|指针移到有事件监听的元素或者它的子元素内。|
|`mouseout`|	指针移出元素，或者移到它的子元素上。|
|`mouseup`	|在元素上释放任意鼠标按键。|
|`pointerlockchange`|	鼠标被锁定或者解除锁定发生时。|
|`pointerlockerror`|	可能因为一些技术的原因鼠标锁定被禁止时。|
|`select`|	有文本被选中。|
|`wheel`|	滚轮向任意方向滚动|
|`focus`|	元素获得焦点（不会冒泡）|
|`blur`|	元素失去焦点（不会冒泡）|
|`resize`	|文档视图已调整大小|
|`scroll`|	文档视图或元素已滚动|
|`cut`|已经剪贴选中的文本内容并且复制到了剪贴板|
|`copy`	|已经把选中的文本内容复制到了剪贴板|
|`paste`|	从剪贴板复制的文本内容被粘贴|
|`reset`|	点击重置按钮时|
|`submit`|	点击提交按钮|
|`close`|	好像是关于窗口的,感觉有用,用到时在补充功能|

## 指令修饰符

### 什么是指令修饰符？
​	所谓指令修饰符就是通过“`.`”指明一些指令**后缀** 不同的**后缀**封装了不同的处理操作  —> 简化代码


### 按键修饰符
- `@keyup.enter`  —>当点击**enter**键的时候才触发

```html
  <div id="app">
    <h3>@keyup.enter  →  监听键盘回车事件</h3>
    <input @keyup.enter="fn" v-model="username" type="text">
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        username: ''
      },
      methods: {
        fn (e) {
          // if (e.key === 'Enter') {
          //   console.log('键盘回车的时候触发', this.username)
          // }

          console.log('键盘回车的时候触发', this.username)
        }
      }
    })
  </script>
```

![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822103021.png)


# 属性绑定指令 v-bind

1. **作用：** 动态设置html的标签属性 比如：src、url、title    
2. **语法:** `v-bind: 属性名=“表达式”`
3. `v-bind:` 可以简写成 => `:`



比如，有一个图片，它的 `src` 属性值，是一个图片地址。这个地址在数据 data 中存储。

则可以这样设置属性值：
- `<img v-bind:src="url" />`
- `<img :src="url" />` （v-bind可以省略）

>我这个并不提供 10-02.png 这张图, 你可以设置为自己的图片
```html
  <div id="app">
    <!-- v-bind:src   =>   :src -->
    <img v-bind:src="imgUrl" v-bind:title="msg" alt="">
    <img :src="imgUrl" :title="msg" alt="">
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        imgUrl: './imgs/10-02.png',  //修改为自己的图片
        msg: 'hello BitZero'
      }
    })
  </script>
```


## v-bind对样式控制的增强-操作class
为了方便开发者进行样式控制， Vue 扩展了 **v-bind** 的语法，可以针对 **class 类名** 和 **style 行内样式** 进行控制 。

**语法：**
```html
<div> :class = "对象/数组">这是一个div</div>
```

### 对象语法
当class动态绑定的是**对象**时，**键就是类名，值就是布尔值**，如果值是**true**，就有这个类，否则没有这个类

```html
<div class="box" :class="{ 类名1: 布尔值, 类名2: 布尔值 }"></div>
```

> **适用场景**：一个类名，来回切换

### 数组语法
当class动态绑定的是**数组**时 → 数组中所有的类，都会添加到盒子上，本质就是一个 class 列表

```html
<div class="box" :class="[ 类名1, 类名2, 类名3 ]"></div>
```

>**适用场景**:  批量添加或删除类


### 代码练习
```html
  <style>
    .box {
      width: 200px;
      height: 200px;
      border: 3px solid #000;
      font-size: 30px;
      margin-top: 10px;
    }
    .pink {
      background-color: pink;
    }
    .big {
      width: 300px;
      height: 300px;
    }
  </style>



  <div id="app">
    <div class="box" :class="{ pink: true, big: true }">黑马程序员</div>
    <div class="box" :class="['pink', 'big']">黑马程序员</div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {

      }
    })
  </script>
```
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822161343.png)


# v-bind对有样式控制的增强-操作style
**语法:**
```html
<div class="box" :style="{ CSS属性名1: CSS属性值, CSS属性名2: CSS属性值 }"></div>
```

## 代码练习
```html
<style>
    .box {
      width: 200px;
      height: 200px;
      background-color: rgb(187, 150, 156);
    }
 </style>


  <div id="app">
    <div class="box" :style="{ width: '400px', height: '400px', backgroundColor: 'green' }"></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {

      }
    })
  </script>
```


# 列表渲染指令 v-for
Vue 提供了 **v-for** 列表渲染指令，用来辅助开发者基于一个数组来循环渲染一个列表结构。

**v-for** 指令需要使用 `(item, index) in arr` 形式的特殊语法，其中：
- `item` 是数组中的每一项
- `index` 是每一项的索引，不需要可以省略
- `arr` 是被遍历的数组

此语法也可以遍历**对象和数字**
```html
<div id="app">
    <h3>小黑水果店</h3>
    <ul>
      <li v-for="(item, index) in list">
        {{ item }} - {{ index }}
      </li>
    </ul>

    <ul>
      <li v-for="item in list">
        {{ item }}
      </li>
    </ul>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        list: ['西瓜', '苹果', '鸭梨', '榴莲']
      }
    })
  </script>
```

## v-for中的key
**语法：** `key="唯一值"`

**作用:** 给列表项添加的 ==**唯一标识**==。便于Vue进行列表项的**正确排序复用**。

**为什么加key:** Vue 的默认行为会尝试原地修改元素（**就地复用**）

实例代码：
```html
 <div id="app">
    <h3>小黑的书架</h3>
    <ul>
      <li v-for="(item, index) in booksList" :key="item.id">
        <span>{{ item.name }}</span>
        <span>{{ item.author }}</span>
        <button @click="del(item.id)">删除</button>
      </li>
    </ul>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        booksList: [
          { id: 1, name: '《红楼梦》', author: '曹雪芹' },
          { id: 2, name: '《西游记》', author: '吴承恩' },
          { id: 3, name: '《水浒传》', author: '施耐庵' },
          { id: 4, name: '《三国演义》', author: '罗贯中' }
        ]
      },
      methods: {
        del (id) {
          this.booksList = this.booksList.filter(item => item.id !== id)
        }
      }
    })
  </script>
```
> 为 **v-for** 添加 **key** , 无论之后使用添加还是删除, 排序的顺序都会是正确的.

![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822101306.png)


# 双向绑定指令 v-model
所谓 **==双向绑定==** 就是：
1. 数据改变后，呈现的页面结果会更新
2. 页面结果更新后，数据也会随之而变

**作用：** 给**表单元素**（input、radio、select）使用，双向绑定数据，可以快速 **获取** 或 **设置** 表单元素内容

**语法：** `v-model="变量"`

**需求：** 使用双向绑定实现以下需求
> 1. 点击登录按钮获取表单中的内容
> 2. 点击重置按钮清空表单中的内容
>![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822101700.png)

```html
  <div id="app">
    <!-- 
      v-model 可以让数据和视图，形成双向数据绑定
      (1) 数据变化，视图自动更新
      (2) 视图变化，数据自动更新
      可以快速[获取]或[设置]表单元素的内容
     -->
    账户：<input type="text" v-model="username"> <br><br>
    密码：<input type="password" v-model="password"> <br><br>
    <button @click="login">登录</button>
    <button @click="reset">重置</button>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        username: '',
        password: ''
      },
      methods: {
        login () {
          console.log(this.username, this.password)
        },
        reset () {
          this.username = ''
          this.password = ''
        }
      }
    })
  </script>
```

![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822102208.png)

##  v-model修饰符
- `v-model.trim` —>去除首位空格
- `v-model.number` —>转数字

为图方便, 这里的案例合并到下面的[[2. Vue中的常用指令#事件修饰符|事件修饰符]]一起使用.

# 事件修饰符
- `@事件名.stop` —> 阻止冒泡
    
- `@事件名.prevent` —>阻止默认行为
    
- `@事件名.stop.prevent` —>可以连用 即阻止事件冒泡也阻止默认行为

```html
  <div id="app">
    <h3>v-model修饰符 .trim .number</h3>
    姓名：<input v-model.trim="username" type="text"><br>
    年纪：<input v-model.number="age" type="text"><br>

    
    <h3>@事件名.stop     →  阻止冒泡</h3>
    <div @click="fatherFn" class="father">
      <div @click.stop="sonFn" class="son">儿子</div>
    </div>

    <h3>@事件名.prevent  →  阻止默认行为</h3>
    <a @click.prevent href="http://www.baidu.com">阻止默认行为</a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        username: '',
        age: '',
      },
      methods: {
        fatherFn () {
          alert('老父亲被点击了')
        },
        sonFn (e) {
          // e.stopPropagation()
          alert('儿子被点击了')
        }
      }
    })
  </script>
```

![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822104526.png)


## v-model在其他表单元素的使用
### 讲解内容：
常见的表单元素都可以用 v-model 绑定关联  →  快速 **获取** 或 **设置** 表单元素的值

它会根据  **控件类型** 自动选取  **正确的方法** 来更新元素
```js
输入框  input:text   ——> value
文本域  textarea	 ——> value
复选框  input:checkbox  ——> checked
单选框  input:radio   ——> checked
下拉菜单 select    ——> value
...
```

### 示例代码
```html
<style>
    textarea {
      display: block;
      width: 240px;
      height: 100px;
      margin: 10px 0;
    }
</style>


<div id="app">
    <h3>小黑学习网</h3>

    姓名：
      <input type="text" v-model="username"> 
      <br><br>

    是否单身：
      <input type="checkbox" v-model="isSingle"> 
      <br><br>

    <!-- 
      前置理解：
        1. name:  给单选框加上 name 属性 可以分组 → 同一组互相会互斥
        2. value: 给单选框加上 value 属性，用于提交给后台的数据
      结合 Vue 使用 → v-model
    -->
    性别: 
      <input v-model="gender" type="radio" name="gender" value="1">男
      <input v-model="gender" type="radio" name="gender" value="2">女
      <br><br>

    <!-- 
      前置理解：
        1. option 需要设置 value 值，提交给后台
        2. select 的 value 值，关联了选中的 option 的 value 值
      结合 Vue 使用 → v-model
    -->
    所在城市:
      <select v-model="cityId">
        <option value="101">北京</option>
        <option value="102">上海</option>
        <option value="103">成都</option>
        <option value="104">南京</option>
      </select>
      <br><br>

    自我描述：
      <textarea v-model="desc"></textarea> 

    <button>立即注册</button>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        username: '',
        isSingle: false,
        gender: "2",
        cityId: '102',
        desc: ""
      }
    })
  </script>
```


# 小练习 

## 京东秒杀-tab栏切换导航高亮
### 需求：
当我们点击哪个tab页签时，哪个tab页签就高亮
### 实现代码
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    ul {
      display: flex;
      border-bottom: 2px solid #e01222;
      padding: 0 10px;
    }
    li {
      width: 100px;
      height: 50px;
      line-height: 50px;
      list-style: none;
      text-align: center;
    }
    li a {
      display: block;
      text-decoration: none;
      font-weight: bold;
      color: #333333;
    }
    li a.active {
      background-color: #e01222;
      color: #fff;
    }

  </style>
</head>
<body>

  <div id="app">
    <ul>
      <li v-for="(item, index) in list" :key="item.id" @click="activeIndex = index">
        <a :class="{ active: index === activeIndex }" href="#">{{ item.name }}</a>
      </li>
    </ul>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        activeIndex: 2, // 记录高亮
        list: [
          { id: 1, name: '京东秒杀' },
          { id: 2, name: '每日特价' },
          { id: 3, name: '品类秒杀' }
        ]
      }
    })
  </script>
</body>
</html>
```


## 进度条效果
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .progress {
      height: 25px;
      width: 400px;
      border-radius: 15px;
      background-color: #272425;
      border: 3px solid #272425;
      box-sizing: border-box;
      margin-bottom: 30px;
    }
    .inner {
      width: 50%;
      height: 20px;
      border-radius: 10px;
      text-align: right;
      position: relative;
      background-color: #409eff;
      background-size: 20px 20px;
      box-sizing: border-box;
      transition: all 1s;
    }
    .inner span {
      position: absolute;
      right: -20px;
      bottom: -25px;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- 外层盒子底色 （黑色） -->
    <div class="progress">
      <!-- 内层盒子 - 进度（蓝色） -->
      <div class="inner" :style="{ width: percent + '%' }">
        <span>{{ percent }}%</span>
      </div>
    </div>
    <button @click="percent = 25">设置25%</button>
    <button @click="percent = 50">设置50%</button>
    <button @click="percent = 75">设置75%</button>
    <button @click="percent = 100">设置100%</button>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script>
    const app = new Vue({
      el: '#app',
      data: {
        percent: 30
      }
    })
  </script>
</body>
</html>
```
![image.png](https://image-1311137268.cos.ap-chengdu.myqcloud.com/SIYuan/20230822162655.png)
