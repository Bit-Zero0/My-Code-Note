---
Modified-date: 2024-07-03 17:57
---

# 冯诺依曼计算机结构
![[ENIAC计算机图.png|444]]
- 采用==十进制==，没有内存储器
- **需要通过旋钮、开关和接插线的不同位置来表示程序**.
	- 在ENIAC上设置一个实用程序，往往需要几天甚至几周的时间。如非必要，使用者很少愿意修改它。
	- 因此，尽管ENIAC是通用的，却总在一段时间内只专用于某个问题(比如弹道计算)，它的通用价值被大大削弱。
	- 如果频繁地设置不同程序，机器在很大一部分时间里会处于设置程序过程而无法运行，它的高速性能又被大大浪费了。


> [!tip]+ 程序通过穿孔介质输入机器，之后长期驻存在机器内部的存储器中。
> 1944年，在ENIAC还未建成之际，研制一台可以存储程序的新机器的申请就提交到了导弹实验室。导弹实验室同意了这个项目，并提供10万美元的预算。这台新机器名叫电子离散变量自动计算机EDVAC(Electronic Discrete Variable Automatic Computer)


冯·诺依曼在研究EDVAC 机时提出了“ 存储程序＂ 的概念，“ 存储程序” 的思想奠定了现代计算机的基本结构， 以此概念为基础的各类计算机统称冯·诺依曼机， 其特点如下：
- 构成程序的指令和数据均采用<mark style="background: #FF5582A6;">二进制</mark>表示。
- ==指令==和数据存放在存储器中，按地址访问。
- 指令在存储器中按==顺序存放==。一般情况下，指令是==顺序执行==的。
- 指令由==操作码==和==地址码==组成:
	- 操作码用来表示执行何种操作。
	- 地址码用来表示操作数在存储器中的位置。
- 机器以<mark style="background: #FF5582A6;">运算器为中心</mark>，输入/输出设备与存储器间的数据传送通过运算器完成。
- 计算机硬件由==运算器、控制器、存储器、输入设备/输出设备==5大部件组成。
![[冯诺依曼体现结构图.svg]]
以运算器为中心 , 每次输入/输出(I/0)操作都需要运算器参与，浪费很多可以用于运算的时间。


## 输入设备
输入设备的主要功能是将程序和数据以机器所能识别和接受的信息形式输入计算机。最常用
也最基本的输入设备是键盘， 此外还有鼠标、扫描仪、摄像机等。

## 输出设备
输出设备的任务是将计算机处理的结果以人们所能接受的形式或其他系统所要求的信息形
式输出。最常用、最基本的输出设备是显示器、打印机。输入/输出设备（简称I/O设备） 是计算
机与外界联系的桥梁， 是计算机中不可缺少的篮要组成部分。

## 存储器
存储器分为主存储器（也称内存储器或主存）和辅助存储器（也称外存储器或外存）。
- 主存储器:用于存放程序和数据可以==直接与CPU交换信息==，又称为内存储器，简称内存或主存。
- 辅助存储器:用于帮助主存存储更多的信息。又称为外部存储器，简称外存或辅存。==辅存中的信息必须调入主存后，才能被CPU访问==。
主存储器的工作方式是按存储单元的地址进行存取， 辅助存储器的存取方式称为按地址存取方式。

主存储器的最基本组成如下图示。存储体存放二进制信息， 存储器地址寄存器(MAR)存放访存地址，经过地址译码后找到所选的存储单元。存储器数据寄存器(MDR) 用千暂存要从存储器中读或写的信息， 时序控制逻辑用千产生存储器操作所盂的各种时序信号。
> [!info]+ MAR 与 MDR
> MAR: Memory Address Register (存储地址寄存器)
> MDR: Memory Data Register (存储数据寄存器)

![[主存储器逻辑图.svg]]
存储体由许多存储单元组成，每个存储单元包含若干存储元件，每个存储元件存储一位二进制代码“0”或“1”。因此存储单元可存储一串二进制代码，称这串代码为存储字，称这串代码的位数为存储字长，存储字长可以是 1B(8bit)或是字节的偶数倍。

MAR 用于寻址，其位数反映最多可寻址的存储单元的个数，如 MAR为 10 位，则最多有
$2^{10}=1024$ 个存储单元，记为 1K。MAR 的长度与 PC 的长度相等。

MDR 的位数通常等于存储字长，一般为字节的2次幂的整数倍。

> [!warning]+ 注意
> MAR 与 MDR 虽然是存储器的一部分，但在现代计算机中却是存在于CPU 中的;另外，后文提到的高速缓存(Cache)也存在于CPU中。


## 运算器


## 控制器





![[Pasted image 20240529163900.png]]
![[Pasted image 20240529163751.png]]
![[Pasted image 20240529163802.png]]
![[Pasted image 20240529163828.png]]

![[Pasted image 20240529163935.png]]

# 主存储器的基本组成
![[Pasted image 20240629095616.png]]
Memory Address Register(存储地址寄存器)
Memory Data Register(存储数据寄存器)




![[Pasted image 20240629095750.png]]
例：
MAR=4位 -> $2^4$总共有24个存储单元
MDR=16位-> 每个存储单元可存放16bit，1个<mark style="background: #FF5582A6;">字(word) </mark>= 16bit

易混淆：1个字节（Byte）= 8bit
1B=1个字节，1b=1个bit


![[Pasted image 20240629100055.png]]
==存储单元==：每个存储单元存放一串二进制代码
==存储字(word)==：存储单元中二进制代码的组合
==存储字长==：存储单元中二进制代码的位数
存储元：即存储二进制的电子元件，每个存储元可存1bit

# 运算器的基本组成
![[Pasted image 20240629100143.png]]
运算器：用于实现算术运算（如：加减乘除）、逻辑运算（如：与或非）

ACC： 累加器，用于存放操作数，或运算结果。
MQ： 乘商寄存器，在乘、除运算时，用于存放操作数或运算结果。
X： 通用的操作数寄存器，用于存放操作数
==ALU==： 算术逻辑单元，通过内部复杂的电路实现算数运算、逻辑运算
![[Pasted image 20240629100227.png]]

# 控制器的基本组成

![[Pasted image 20240629100811.png]]

CU(Control Unit)：控制单元，分析指令，给出控制信号
IR(Instruction Register)：指令寄存器，存放当前执行的指令
PC(Program Counter)：程序计数器，存放下一条指令地址，有自动加1功能

## 计算机的工作过程

```c
inta=2,b=3,c=1,y=0;
void main()
{
	y=a*b+c;
}					
```

![[Pasted image 20240629101119.png]]


![[Pasted image 20240629101148.png]]
初：(PC)=0，指向第一条指令的存储地址
1：(PC)->MAR，导致(MAR)=0
3：M(MAR)->MDR，导致(MDR)=000001 0000000101
4：(MDR)->IR，导致(IR)=000001 0000000101
5：OP(IR)->CU，指令的操作码送到CU，CU分析后得知，这是“取数”指令
6：Ad(IR)->MAR，指令的地址码送到MAR，导致(MAR)=5
8：M(MAR)->MDR，导致(MDR)=0000000000000010=2
9：(MDR)->ACC，导致(ACC)=0000000000000010=2

取指令（1~4）
分析指令（5）
执行**取数**指令（6 ~ 9）



![[Pasted image 20240629101600.png]]
上一条指令取指后PC自动+1，(PC)=1；执行后，(ACC)=2
1：(PC)->MAR，导致(MAR)=1
3：M(MAR)->MDR，导致(MDR)=000100 0000000110
4：(MDR)->IR，导致(IR)= 000100 0000000110
5：OP(IR)->CU，指令的操作码送到CU，CU分析后得知，这是“乘法”指令
6：Ad(IR)->MAR，指令的地址码送到MAR，导致(MAR)=6
8：M(MAR)->MDR，导致(MDR)=0000000000000011=3
9：(MDR)->MQ，导致(MQ)=0000000000000011=3
10：(ACC)->X，导致(X)=2
11：(MQ) * (X)->ACC，由ALU实现乘法运算，导致(ACC)=6，如果乘积太大，则需要MQ辅助存储

取指令（1~4）
分析指令（5）
执行**乘法**指令（6 ~ 11）



![[Pasted image 20240629102157.png]]

上一条指令取指后(PC)=2，执行后，(ACC)=6
1：(PC)->MAR，导致(MAR)=2
3：M(MAR)->MDR，导致(MDR)= 000011 0000000111
4：(MDR)->IR，导致(IR)= 000011 0000000111
5：OP(IR)->CU，指令的操作码送到CU，CU分析后得知，这是“加法”指令
6：Ad(IR)->MAR，指令的地址码送到MAR，导致(MAR)=7
8：M(MAR)->MDR，导致(MDR)=0000000000000001=1
9：(MDR)->X，导致(X)=0000000000000001=1
10：(ACC)+(X)->ACC，导致(ACC)=7，由ALU实现加法运算

取指令（1~4）
分析指令（5）
执行**加法**指令（6 ~ 10）
# 内容小结
![[Pasted image 20240529164345.png]]

# 习题
![[Pasted image 20240529164411.png]]
![[Pasted image 20240529164425.png]]![[Pasted image 20240529164442.png]]
![[Pasted image 20240529164500.png]]
![[Pasted image 20240529164512.png]]
![[Pasted image 20240529164523.png]]
