---
Modified-date: 2024-06-08 17:30
---

# 区分内存和硬盘

内存指的是我们的内存条，也经常用RAM(随机存取存储器)来指代。
特点:
- 临时存储，断电后不保存数据，速度快，容量小

硬盘主要指我们常见的机械硬盘，或者固态硬盘
特点:
- 长期存储，断电后数据仍然存在，速度慢，容量大

注意，以上说的快慢都是相对的
有说法将硬盘称作ROM，其实这是错误的。ROM指只读存储器，其内容在写入后就不能更改，



# 存储单元
物理内存被划分为很多个存储单元，一个存储单元能存储8 bit(比特位)内容，也就是1字节
注意，内存的最小单元是字节，不是比特位。

- 1B:    (Byte)         等于8 bit
- 1KB:   (Kilobyte)   等于1024 B
- 1MB: (Megabyte)  等于1024 KB
- 1GB: (Gigabyte)  等于1024 MB
- 1TB: (Terabyte)  等于1024 GB

每一个存储单元都有相应的编号，也就是内存地址

当我们运行一个程序时，操作系统会把这个程序载入到内存当中，随后CPU读取和写入该程序中
的某些数据并执行其代码.
不论是读取，写入，还是执行，这些都需要CPU通过总线进行的。

总线分为==数据总线==，==地址总线==，==控制总线==。
简而言之，地址总线负责寻址，控制总线负责发出的控制指令(例如读取和写入)，
数据总线负责各组件之间的数据传输。


# CPU的寻址能力
CPU的寻址能力是由==地址总线==的**位数**决定的

通常我们认为32位系统具有32位的寻址能力，64位系统具有64位寻址能力，但这也并不绝对，
例如32位系统可能利用CPU的36位地址总线进行PAE分页来寻址更多物理内存，如今支持64位的
CPU也并没有64位地址总线，实际寻址范围远远达不到64位理论大小.

一般认为32位系统最大支持内存是4GB，我们来计算一下这是怎么得出的结论.
> 首先，32位操作系统使用CPU的32位地址总线
>每一位总线可以有两种状态，即0和1，所以1位总线可以寻址两个存储单元，2位总线可以寻址4个存储单元……
>因此，32位总线可以寻址2的32次方个内存单元，即2的22次方个KB，2的12次方个MB，2的2次方个GB，也就是4GB


思考，为什么不是4GB:8=0.5GB?
#todo 

同理，64位操作系统理论上支持的最大内存是2的64次方，是32位操作系统的2的32次方倍，而
不仅仅是2倍的关系。
这个数字目前远超CPU的寻址能为和现代计算机软硬件的需求，因此实际上远远没有这么大的内
存，现代cpu也并不真实提供64位寻址能力。
这也是目前以及未来很长时间都不会发展128位处理器和系统的主要原因


# 扩展: 关于虚拟内存
我们刚才讲的都是物理内存而非虚拟内存物理内存即真实存在的内存，虚拟内存是建立在页表的基础上，由操作系统实现的。

举个例子
32位Windows为每个进程分配独立的4GB虚拟地址空间，但是通过刚才的学习得知，32位地址总线最大支持的内存才4GB，为什么32位Windows能给每个进程有4GB独立的内存?