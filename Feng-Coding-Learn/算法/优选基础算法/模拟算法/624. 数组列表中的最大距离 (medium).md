---
Type: Note
tags:
  - 算法
  - CPP
  - medium
Status: writing
Start-date: 2025-02-20 13:47
Finish-date: 
Modified-date: 2025-02-20 17:18
Publish: false
---


# 624. 数组列表中的最大距离
[624. 数组列表中的最大距离](https://leetcode.cn/problems/maximum-distance-in-arrays/)

## 题目描述


## 解题思路

**问题分析**  
题目要求从多个非降序排列的数组中分别选取一个元素（来自不同数组），计算这两个元素的最大差值。由于每个数组有序，其最小值和最大值分别位于首尾元素。关键点在于，如何高效找到两个不同数组中的极值组合，使得差值最大。

**关键观察**  
最大差值可能出现在以下两种情况：
1. 当前数组的最大值与之前所有数组的最小值之差。
2. 当前数组的最小值与之前所有数组的最大值之差。

**算法思路**  
遍历每个数组，维护全局最小值 `_min` 和最大值 `_max`。对于当前数组：
1. 计算其最大值与之前所有数组的 `_min` 的差，以及其最小值与之前所有数组的 `_max` 的差。
2. 用这两个差值更新全局最大差值 `answer`。
3. 更新 `_min` 和 `_max` 以包含当前数组的极值，供后续数组使用。

**正确性证明**  
每次处理数组时，`_min` 和 `_max` 保存的是之前数组的极值，因此计算差值时，两个值必定来自不同数组，满足题目条件。遍历完成后，所有可能的极值组合都被考虑，确保答案正确。


### 算法流程

1. **初始化**：  
	- `answer` 记录最大差值，初始为0。
	- `_min` 和 `_max` 分别初始为极大和极小值，确保首次比较时被正确更新。

2. **遍历每个数组**：  
	- 计算当前数组的最大值（末元素）与 `_min` 的差，以及 `_max` 与当前数组的最小值（首元素）的差。
	- 更新 `answer` 为这两个差值与当前 `answer` 的最大值。
	- 更新 `_min` 和 `_max` 为当前数组的极值与历史极值的较小/较大者。

3. **返回结果**：  
	- 遍历结束后，`answer` 即为所求的最大差值。


> [!question]+ 回答一下answer为什么要在_min 和_max前进行更新?
>   举个例子，假设现在遍历到第i个数组，这时候如果先更新`_min`和`_max`，那么当前的数组的`arr[0]`和`arr.back()`会被包含到全局的`_min`和`_max`中。然后计算差值的时候，可能使用的是已经包含当前数组的极值的情况，这会导致当前数组的极值和自己进行比较，从而违反题目中两个元素必须来自不同数组的条件。  
> 
> 因此，正确的做法是在处理每个数组时，先使用之前的`_min`和`_max`来计算可能的差值，这样确保当前数组的极值不会和自己数组中的值进行比较。只有在计算完可能的差值后，再将当前数组的极值更新到全局的`_min`和`_max`中，供后续数组使用。

## C++代码

```cpp
class Solution {
public:
    int maxDistance(vector<vector<int>>& arrays) {
        int answer = 0;  // 存储最终结果，初始为0
        int _min = 10001, _max = -10001;  // 初始化为极大和极小值，确保首次比较正确更新

        for (auto& arr : arrays) {  // 遍历每个数组
            // 计算当前数组的最大值与之前最小值的差，以及之前最大值与当前数组最小值的差
            // 取这两个差值与当前answer的最大值更新answer
            answer = max({answer, arr.back() - _min, _max - arr[0]});
            // 更新全局最小值，确保是当前数组的最小值与历史最小值的较小者
            _min = min(arr[0], _min);
            // 更新全局最大值，确保是当前数组的最大值与历史最大值的较大者
            _max = max(arr.back(), _max);
        }

        return answer;  // 返回最大差值
    }
};
```

**注释说明**  
- **关键变量**：  
  - `_min` 和 `_max` 分别记录遍历过程中所有已处理数组的最小值和最大值。
  - `answer` 通过比较当前数组的极值与历史极值的差值，逐步更新为最大值。
  
- **遍历逻辑**：  
  在每次循环中，先计算差值再更新极值，确保当前数组的极值不会与历史极值来自同一数组，从而满足题目要求。


### 复杂度分析  
- **时间复杂度**：O(n)，每个数组遍历一次，每次操作常数时间。
- **空间复杂度**：O(1)，仅需维护几个变量。


