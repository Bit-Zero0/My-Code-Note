---
Type: Note
tags:
  - 算法
  - easy
Status: done
Start-date: 2024-09-25 20:51
Finish-date: 2025-01-20
Modified-date: 2025-03-04 18:16
Publish: false
---


# 面试题 08.01. 三步问题
[面试题 08.01. 三步问题](https://leetcode.cn/problems/three-steps-problem-lcci/)

## 题目描述
三步问题。有个小孩正在上楼梯，楼梯有n阶台阶，小孩一次可以上1阶、2阶或3阶。实现一种方法，计算小孩有多少种上楼梯的方式。结果可能很大，你需要对结果模1000000007。

**示例1:**
 **输入**：`n = 3 `
 **输出**：`4`
 **说明**: 有四种走法

**示例2:**
 **输入**：`n = 5`
 **输出**：`13`


## 解题思路
这道题的核心是使用 **动态规划** 来解决爬楼梯问题的变种。与经典的爬楼梯问题不同，这里每次可以走 1 步、2 步或 3 步。

动态规划的思路：
1. 定义状态：`dp[i]` 表示走到第 `i` 阶台阶的方法数。
2. 状态转移方程：走到第 `i` 阶台阶的方法数等于走到第 `i-1` 阶、第 `i-2` 阶和第 `i-3` 阶的方法数之和，即：` dp[i] = dp[i-1] + dp[i-2] + dp[i-3]`
3. 初始条件：
   - `dp[1] = 1`：只有 1 种方法（走 1 步）。
   - `dp[2] = 2`：有 2 种方法（走 1+1 步或直接走 2 步）。
   - `dp[3] = 4`：有 4 种方法（1+1+1、1+2、2+1、3）。
4. 最终结果：`dp[n]` 即为走到第 `n` 阶台阶的方法数。

为了避免整数溢出，需要对结果取模 `1e9+7`。

### 算法流程
1. 处理边界情况：
   - 如果 `n <= 2`，直接返回 `n`。
   - 如果 `n == 3`，直接返回 `4`。
2. 初始化动态规划数组 `dp`，大小为 `n+1`。
3. 设置初始条件：
   - `dp[1] = 1`，`dp[2] = 2`，`dp[3] = 4`。
4. 从 `i = 4` 开始遍历到 `n`，计算 `dp[i]`：
   - `dp[i] = (dp[i-1] + dp[i-2] + dp[i-3]) % MOD`。
5. 返回 `dp[n]`。


#### 示例解释
以 `n = 4` 为例：
1. 初始条件：
   - `dp[1] = 1`。
   - `dp[2] = 2`。
   - `dp[3] = 4`。
2. 计算 `dp[4]`：
   - `dp[4] = (dp[3] + dp[2] + dp[1]) % MOD = (4 + 2 + 1) % MOD = 7`。
3. 返回 `dp[4] = 7`。
![[面试题 08.01. 三步问题思路图.excalidraw|616]]




## C++代码

```cpp
class Solution {
public:
    int waysToStep(int n) {
        // 处理边界情况
        if (n <= 2) return n; // n=1 或 n=2 时直接返回 n
        if (n == 3) return 4; // n=3 时直接返回 4

        const int MOD = 1e9 + 7; // 定义模数

        // 初始化动态规划数组
        vector<long long> dp(n + 1);
        dp[1] = 1; // 走到第 1 阶有 1 种方法
        dp[2] = 2; // 走到第 2 阶有 2 种方法
        dp[3] = 4; // 走到第 3 阶有 4 种方法

        // 动态规划计算 dp[i]
        for (int i = 4; i <= n; i++) {
            // 状态转移方程：dp[i] = dp[i-1] + dp[i-2] + dp[i-3]
            dp[i] = ((dp[i - 1] + dp[i - 2]) % MOD + dp[i - 3]) % MOD;
        }

        // 返回结果
        return dp[n];
    }
};
```


### 复杂度分析
- **时间复杂度**：`O(n)`，需要遍历从 4 到 `n` 的所有台阶。
- **空间复杂度**：`O(n)`，需要一个大小为 `n+1` 的数组来存储动态规划状态。

---




