---
Type: Note
tags:
  - C
Status: writing
Start-date: 2024-07-12 22:40
Finish-date: 
Modified-date: 2024-07-12 22:41
Publish: false
---

# 本文摘要
1. 函数是什么
2. 库函数
3. 自定义函数
4. 函数参数
5. 函数调用
6. 函数的嵌套调用和链式访问
7. 函数的声明和定义
8. 函数递归

## 前提知识
[[初识C语言]] [[分支与循环语句]]


# 函数是什么？

数学中我们常见到函数的概念。但是你了解C语言中的函数吗？

> [!info]+ 维基百科中对函数的定义：子程序
> 在计算机科学中，子程序（英语：Subroutine, procedure, function, routine, method, subprogram, callable unit），是一个大型程序中的某部分代码， 由一个或多个语句块组成。它负责完成某项特定任务，而且相较于其他代 码，具备相对的独立性。
> 一般会有输入参数并有返回值，提供对过程的封装和细节的隐藏。这些代码通常被集成为软件库。


# C语言中函数的分类

- 库函数
- 自定义函数


## 库函数
为什么会有库函数？
1. 我们知道在我们学习C语言编程的时候，总是在一个代码编写完成之后迫不及待的想知道结果，想把这个结果打印到我们的屏幕上看看。这个时候我们会频繁的使用一个功能：将信息按照一定的格式打印到屏幕上（printf）。
2. 在编程的过程中我们会频繁的做一些字符串的拷贝工作（strcpy）。
3. 在编程是我们也计算，总是会计算n的k次方这样的运算（pow）。

像上面我们描述的基础功能，它们不是业务性的代码。我们在开发的过程中每个程序员都可能用的到，为了支持可移植性和提高程序的效率，所以C语言的基础库中提供了一系列类似的库函数，方便程序员进行软件开发。

> [!question]+ 那怎么学习库函数呢？
> - [www.cplusplus.com](http://www.cplusplus.com/reference/)
> - [http://en.cppreference.com](http://en.cppreference.com)
> - [http://zh.cppreference.com(中文版)](http://zh.cppreference.com)
> 
> 英文真的很重要。最起码得看懂文献。



简单的总结，C语言常用的库函数都有：
- IO函数
- 字符串操作函数
- 字符操作函数
- 内存操作函数
- 时间/日期函数
- 数学函数
- 其他库函数

我们参照文档，学习几个库函数：(教会学生怎么使用文档来学习库函数)。

[strcpy](http://www.cplusplus.com/reference/cstring/strcpy/?kw=strcpy)
```c
char * strcpy ( char * destination, const char * source );
```

[memset](http://www.cplusplus.com/reference/cstring/memset/?kw=memset)
```c
void * memset ( void * ptr, int value, size_t num );
```

注：
但是库函数必须知道的一个秘密就是：使用库函数，必须包含`#include` 对应的头文件。
这里对照文档来学习上面几个库函数，目的是掌握库函数的使用方法。



###  如何学会使用库函数？
需要全部记住吗？**No**

需要学会查询工具的使用：
> - [www.cplusplus.com](http://www.cplusplus.com/reference/)
> - [http://en.cppreference.com](http://en.cppreference.com)
> - [http://zh.cppreference.com(中文版)](http://zh.cppreference.com)



## 自定义函数
如果库函数能干所有的事情，那还要程序员干什么？
所有更加重要的是**自定义函数**。
自定义函数和库函数一样，有函数名，返回值类型和函数参数。
但是不一样的是这些都是我们自己来设计。这给程序员一个很大的发挥空间。
函数的组成：
```c
ret_type fun_name(para1, * )
{
	statement;//语句项
}
```
`ret_type` 返回类型
`fun_name` 函数名
`para1` 函数参数


我们举一个例子：
写一个函数可以找出两个整数中的最大值。
```c
#include <stdio.h>

//get_max函数的设计
int get_max(int x, int y)
{
	return (x>y)?(x):(y);
}

int main()
{
	int num1 = 10;
	int num2 = 20;
	int max = get_max(num1, num2);
	printf("max = %d\n", max);
	return 0;
}
```


再举个例子：
写一个函数可以交换两个整形变量的内容。
```c
#include <stdio.h>

//实现成函数，但是不能完成任务
void Swap1(int x, int y)
{
	int tmp = 0;
	tmp = x;
	x = y;
	y = tmp;
}
//正确的版本
void Swap2(int *px, int *py)
{
	int tmp = 0;
	tmp = *px;
	*px = *py;
	*py = tmp;
}
int main()
{
	int num1 = 1;
	int num2 = 2;
	Swap1(num1, num2);
	printf("Swap1::num1 = %d num2 = %d\n", num1, num2);
	Swap2(&num1, &num2);
	printf("Swap2::num1 = %d num2 = %d\n", num1, num2);
	return 0;
}
```


# 函数的参数
## 实际参数(实参)
真实传给函数的参数，叫实参。
实参可以是：常量、变量、表达式、函数等。
无论实参是何种类型的量，在进行函数调用时，它们都必须有确定的值，以便把这些值传送给形参。

## 形式参数(形参)
形式参数是指函数名后括号中的变量，因为形式参数只有在函数被调用的过程中才实例化（分配内
存单元），所以叫形式参数。形式参数当函数调用完成之后就自动销毁了。因此形式参数只在函数中有效。
上面Swap1 和Swap2 函数中的参数x，y，px，py 都是**形式参数**。在main函数中传给Swap1 的num1 ，num2 和传给Swap2 函数的&num1 ， &num2 是**实际参数**。

这里我们对函数的实参和形参进行分析：
![[Pasted image 20240712225831.png]]

代码对应的内存分配如下：
![[Pasted image 20240712225840.png]]
这里可以看到Swap1 函数在调用的时候， x ， y 拥有自己的空间，同时拥有了和实参一模一样的内容。
所以我们可以简单的认为：**形参实例化之后其实相当于实参的一份临时拷贝**。

# 函数的调用

## 传值调用
函数的形参和实参分别占有不同内存块，对形参的修改不会影响实参。

## 传址调用
传址调用是把函数外部创建变量的内存地址传递给函数参数的一种调用函数的方式。
这种传参方式可以让函数和函数外边的变量建立起真正的联系，也就是函数内部可以直接操作函数外部的变量。


## 练习
> 1. 写一个函数可以判断一个数是不是素数。
> 2. 写一个函数判断一年是不是闰年。
> 3. 写一个函数，实现一个整形有序数组的二分查找。
> 4. 写一个函数，每调用一次这个函数，就会将num 的值增加1。


# 函数的嵌套调用和链式访问
函数和函数之间可以根据实际的需求进行组合的，也就是互相调用的。

## 嵌套调用
```c
#include <stdio.h>

void new_line()
{
	printf("hehe\n");
}

void three_line()
{
	int i = 0;
	for(i=0; i<3; i++)
	{
		new_line();
	}
}

int main()
{
	three_line();
	return 0;
}
```
函数可以嵌套调用，但是不能嵌套定义。

## 链式访问
把一个函数的返回值作为另外一个函数的参数。
```c
#include <stdio.h>
#include <string.h>
int main()
{
	char arr[20] = "hello";
	int ret = strlen(strcat(arr,"bit"));//这里介绍一下strlen函数
	printf("%d\n", ret);
	return 0;
}
```

猜猜看
```c
#include <stdio.h>
int main()
{
	printf("%d", printf("%d", printf("%d", 43)));
	//结果是啥？
	//注：printf函数的返回值是打印在屏幕上字符的个数
	return 0;
}
```


# 函数的声明和定义






































# 总结
